<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-features/high-performance-order-storage/cli-tools" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">HPOS CLI Tools | WooCommerce developer docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.woocommerce.com/docs/img/woo-dev-site-logo.svg"><meta data-rh="true" name="twitter:image" content="https://developer.woocommerce.com/docs/img/woo-dev-site-logo.svg"><meta data-rh="true" property="og:url" content="https://developer.woocommerce.com/docs/features/high-performance-order-storage/cli-tools"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="HPOS CLI Tools | WooCommerce developer docs"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.woocommerce.com/docs/features/high-performance-order-storage/cli-tools"><link data-rh="true" rel="alternate" href="https://developer.woocommerce.com/docs/features/high-performance-order-storage/cli-tools" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.woocommerce.com/docs/features/high-performance-order-storage/cli-tools" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.25570730.css">
<script src="/docs/assets/js/runtime~main.0758caf8.js" defer="defer"></script>
<script src="/docs/assets/js/main.c4376d82.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/docs/img/woo-dev-site-logo.svg"><link rel="preload" as="image" href="/docs/img/woo-dev-site-logo-dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/woo-dev-site-logo.svg" alt="WooCommerce developer docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/docs/img/woo-dev-site-logo-dark.svg" alt="WooCommerce developer docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/category/getting-started">Extensions</a><a class="navbar__item navbar__link" href="/docs/apis/rest-api/">API</a><a class="navbar__item navbar__link" href="/docs/wc-cli/cli-overview">CLI</a></div><div class="navbar__items navbar__items--right"><a href="https://developer.woocommerce.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/woocommerce/woocommerce/tree/trunk/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/">Getting started</a><button aria-label="Collapse sidebar category &#x27;Getting started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/development-environment">Developer environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/developer-tools">Developer tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/debugging">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/tools-for-low-code-development">Low-code tools</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/features/payments/payment-gateway-api">Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/features/payments/payment-gateway-api">Payments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/features/shipping/shipping-method-api">Shipping</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/features/analytics/adding-columns-to-analytics-reports-and-csv-downloads">Analytics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/features/email/email-html-best-practices">Email</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/features/high-performance-order-storage/">High Performance Order Storage</a><button aria-label="Collapse sidebar category &#x27;High Performance Order Storage&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/features/high-performance-order-storage/cli-tools">HPOS CLI Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/features/high-performance-order-storage/enable-hpos">Enable HPOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/features/high-performance-order-storage/guide-large-store">Enable HPOS for large stores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/features/high-performance-order-storage/recipe-book">HPOS extension recipe book</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/features/high-performance-order-storage/wc-order-query-improvements">HPOS order querying APIs</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/theming/block-theme-development/theming-woo-blocks">Theming</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/category/cart-and-checkout-blocks">Block development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/best-practices/performance/configuring-caching-plugins">Best practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user-experience-guidelines/ux-guidelines-payments/">UX guidelines</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/code-snippets/">Code snippets</a><button aria-label="Expand sidebar category &#x27;Code snippets&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/contribution/contributing/">Contribution</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Features</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/features/high-performance-order-storage/"><span itemprop="name">High Performance Order Storage</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">HPOS CLI Tools</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>HPOS CLI Tools</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>We have a number of <a href="https://developer.woocommerce.com/docs/category/wc-cli/" target="_blank" rel="noopener noreferrer">WP-CLI commands</a> that can be used to manage HPOS-related functionality, all of which live under the <code>wp wc hpos</code> namespace (though you may come across blog posts and older documentation referencing the now-deprecated <code>wp wc cot</code> namespace).</p>
<p>The following table provides an overview of what each command does, while more details and examples can be found below.</p>
<p>Keep in mind that the commands themselves have documentation and examples that can be accessed via WP-CLI&#x27;s help by passing the <code>--help</code> flag.</p>
<table><thead><tr><th>Command</th><th>Use this command to...</th></tr></thead><tbody><tr><td><code>wc hpos status</code></td><td>Get an overview of all HPOS matters on your site.</td></tr><tr><td><code>wc hpos enable</code></td><td>Enable HPOS (and possibly compatibility mode).</td></tr><tr><td><code>wc hpos disable</code></td><td>Disable HPOS (and possibly compatibility mode).</td></tr><tr><td><code>wc hpos count_unmigrated</code></td><td>Get a count of all orders pending sync.</td></tr><tr><td><code>wc hpos sync</code></td><td>Performantly sync orders from the currently active order storage to the other.</td></tr><tr><td><code>wc hpos verify_data</code></td><td>Verify data between datastores.</td></tr><tr><td><code>wc hpos diff</code></td><td>Get an user friendly version of the differences for an order between both order storages.</td></tr><tr><td><code>wc hpos backfill</code></td><td>Copy over whole orders or specific bits of order data from any order storage to the other.</td></tr><tr><td><code>wc hpos cleanup</code></td><td>Remove order data from legacy tables.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage-and-examples">Usage and examples<a href="#usage-and-examples" class="hash-link" aria-label="Direct link to Usage and examples" title="Direct link to Usage and examples">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-hpos-status"><code>wc hpos status</code><a href="#wc-hpos-status" class="hash-link" aria-label="Direct link to wc-hpos-status" title="Direct link to wc-hpos-status">​</a></h3>
<p>Use this to get an overview of HPOS settings and status on your site. The command will output whether HPOS and compatibility mode are enabled or not, and other useful information such as orders pending sync or subject to cleanup.</p>
<p><strong>Note:</strong> Remember that, if desired, orders pending sync can be synced using <a href="#wc-hpos-sync"><code>wc hpos sync</code></a> and, similarly, you can perform a cleanup on those subject to cleanup (provided compatibility mode is disabled) by running <a href="#wc-hpos-cleanup"><code>wc hpos cleanup all</code></a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1---hpos-status-output">Example 1 - HPOS status output<a href="#example-1---hpos-status-output" class="hash-link" aria-label="Direct link to Example 1 - HPOS status output" title="Direct link to Example 1 - HPOS status output">​</a></h4>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HPOS enabled?: yes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Compatibility mode enabled?: no</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Unsynced orders: 651</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Orders subject to cleanup: 348</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-hpos-enable"><code>wc hpos enable</code><a href="#wc-hpos-enable" class="hash-link" aria-label="Direct link to wc-hpos-enable" title="Direct link to wc-hpos-enable">​</a></h3>
<p>Use this command to enable HPOS and compatibility mode (if desired) from the command line.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1---enable-hpos-via-cli">Example 1 - Enable HPOS via CLI<a href="#example-1---enable-hpos-via-cli" class="hash-link" aria-label="Direct link to Example 1 - Enable HPOS via CLI" title="Direct link to Example 1 - Enable HPOS via CLI">​</a></h4>
<p>Enables HPOS and compatibility mode too (<code>--with-sync</code> flag).</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos enable --with-sync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running pre-enable checks...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: Sync enabled.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: HPOS enabled.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-hpos-disable"><code>wc hpos disable</code><a href="#wc-hpos-disable" class="hash-link" aria-label="Direct link to wc-hpos-disable" title="Direct link to wc-hpos-disable">​</a></h3>
<p>Similarly to the prior command, this can be used to disable HPOS.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1---attempt-to-disable-hpos-with-orders-pending-sync">Example 1 - Attempt to disable HPOS (with orders pending sync)<a href="#example-1---attempt-to-disable-hpos-with-orders-pending-sync" class="hash-link" aria-label="Direct link to Example 1 - Attempt to disable HPOS (with orders pending sync)" title="Direct link to Example 1 - Attempt to disable HPOS (with orders pending sync)">​</a></h4>
<p>If there are any orders pending sync, you won&#x27;t be allowed to disable HPOS until those orders have been synced (via <code>wp wc hpos sync</code>).</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos disable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running pre-disable checks...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: [Failed] There are orders pending sync. Please run `wp wc hpos sync` to sync pending orders.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2---disable-hpos">Example 2 - Disable HPOS<a href="#example-2---disable-hpos" class="hash-link" aria-label="Direct link to Example 2 - Disable HPOS" title="Direct link to Example 2 - Disable HPOS">​</a></h4>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos disable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Running pre-disable checks...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: HPOS disabled.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-hpos-count_unmigrated"><code>wc hpos count_unmigrated</code><a href="#wc-hpos-count_unmigrated" class="hash-link" aria-label="Direct link to wc-hpos-count_unmigrated" title="Direct link to wc-hpos-count_unmigrated">​</a></h3>
<p>Prints the number of orders pending sync.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1---obtain-number-of-orders-pending-sync">Example 1 - Obtain number of orders pending sync<a href="#example-1---obtain-number-of-orders-pending-sync" class="hash-link" aria-label="Direct link to Example 1 - Obtain number of orders pending sync" title="Direct link to Example 1 - Obtain number of orders pending sync">​</a></h4>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos count_unmigrated</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">There are 651 orders to be synced.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-hpos-sync"><code>wc hpos sync</code><a href="#wc-hpos-sync" class="hash-link" aria-label="Direct link to wc-hpos-sync" title="Direct link to wc-hpos-sync">​</a></h3>
<p>This command can be used to migrate orders from the posts order storage to HPOS (or viceversa) based on the current settings in WC &gt; Settings &gt; Advanced &gt; Features.
That is, it&#x27;ll sync orders from your currently selected datastore to the other one.</p>
<p>Note that enabling compatibility mode in the settings will eventually take care of migrating all orders, but this command can be used to do that more performantly.</p>
<p>If you need more control over which datastore to use as source (or destination) regardless of settings, or want to migrate just a few orders or properties, use <a href="#wc-hpos-backfill"><code>wp wc hpos backfill</code></a> instead.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1---sync-all-orders">Example 1 - Sync all orders<a href="#example-1---sync-all-orders" class="hash-link" aria-label="Direct link to Example 1 - Sync all orders" title="Direct link to Example 1 - Sync all orders">​</a></h4>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos sync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">There are 999 orders to be synced.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Order Data Sync  100% [============================================================================================] 0:08 / 0:08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Sync completed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: 999 orders were synced in 14 seconds.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-hpos-verify_data"><code>wc hpos verify_data</code><a href="#wc-hpos-verify_data" class="hash-link" aria-label="Direct link to wc-hpos-verify_data" title="Direct link to wc-hpos-verify_data">​</a></h3>
<p>Use this command to check that order data in both the legacy (posts) datastore and HPOS is in sync. This is only relevant if you have &quot;compatibility mode&quot; enabled and orders might&#x27;ve been modified outside of the usual WooCommerce flows.</p>
<p>This command operates on all orders. For a user friendlier alternative that operates on individual orders, refer to <a href="#wc-hpos-diff"><code>wp wc hpos diff</code></a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1---verify-data-on-a-migrated-site">Example 1 - Verify data on a migrated site<a href="#example-1---verify-data-on-a-migrated-site" class="hash-link" aria-label="Direct link to Example 1 - Verify data on a migrated site" title="Direct link to Example 1 - Verify data on a migrated site">​</a></h4>
<p>All orders are identical between datastores.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos verify_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Order Data Verification  100% [====================================================================================] 0:00 / 0:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Verification completed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: 999 orders were verified in 0 seconds.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2---verification-failures">Example 2 - Verification failures<a href="#example-2---verification-failures" class="hash-link" aria-label="Direct link to Example 2 - Verification failures" title="Direct link to Example 2 - Verification failures">​</a></h4>
<p>An order (with ID 100126) fails verification due to differences in order total, tax, modification date and billing information.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos verify_data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Order Data Verification  100% [====================================================================================] 0:00 / 0:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Verification completed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error: 999 orders were verified in 0 seconds. 1 error found: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;100126&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;column&quot;: &quot;post_modified_gmt&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;original_value&quot;: &quot;2024-04-04 15:32:27&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;new_value&quot;: &quot;2024-04-05 15:19:56&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;column&quot;: &quot;_order_tax&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;original_value&quot;: &quot;74&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;new_value&quot;: &quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;column&quot;: &quot;_order_total&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;original_value&quot;: &quot;567.25&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;new_value&quot;: &quot;0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;order_id&quot;: 100126,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;meta_key&quot;: &quot;_billing_address_index&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;orig_meta_values&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Hans Howell Moore Ltd 325 Ross Drive  Wilfridhaven WA 23322 NF heidi.koch@example.net +17269674166&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;new_meta_values&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Hans X Howell Moore Ltd 325 Ross Drive  Wilfridhaven WA 23322 NF heidi.koch@example.net +17269674166&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}. Please review the error above.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-3---re-migrate-during-verification">Example 3 - Re-migrate during verification<a href="#example-3---re-migrate-during-verification" class="hash-link" aria-label="Direct link to Example 3 - Re-migrate during verification" title="Direct link to Example 3 - Re-migrate during verification">​</a></h4>
<p>The verification command also admits a <code>--re-migrate</code> flag that will attempt to sync orders that have differences. This could effectively overwrite an order in the database, so use with care.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos verify_data --re-migrate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Order Data Verification  100% [====================================================================================] 0:00 / 0:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Verification completed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: 999 orders were verified in 0 seconds.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-hpos-diff"><code>wc hpos diff</code><a href="#wc-hpos-diff" class="hash-link" aria-label="Direct link to wc-hpos-diff" title="Direct link to wc-hpos-diff">​</a></h3>
<p>If you have enabled compatibility mode or migrated orders using <code>wp wc hpos sync</code>, all of your orders should be in an identical state in both datastores (the legacy one and HPOS), but errors can happen. Also, manually modifying orders in the database or use of HPOS-incompatible plugins can result in orders deviating.</p>
<p>The <code>wp wc hpos diff</code>  tool can be used to look into those (possible) differences, which can be useful to determine whether re-migrating to/from either datastore should be done, or a more careful approach needs to be taken.</p>
<p>The tool itself doesn&#x27;t reconcile the differences. For that you should use <a href="#wc-hpos-backfill"><code>wp wc hpos backfill</code></a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1---no-difference-between-orders">Example 1 - No difference between orders<a href="#example-1---no-difference-between-orders" class="hash-link" aria-label="Direct link to Example 1 - No difference between orders" title="Direct link to Example 1 - No difference between orders">​</a></h4>
<p>Order is the same in both datastores (legacy and HPOS).</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos diff 100087</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: No differences found.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2---mismatch-in-order-properties-between-datastores">Example 2 - Mismatch in order properties between datastores<a href="#example-2---mismatch-in-order-properties-between-datastores" class="hash-link" aria-label="Direct link to Example 2 - Mismatch in order properties between datastores" title="Direct link to Example 2 - Mismatch in order properties between datastores">​</a></h4>
<p>This examples shows that order <code>100126</code>  differs in various fields between both datastores. For example, its HPOS version has status <code>completed</code> while the post is still in <code>pending</code> status. Similarly, there are differences in other fields and there&#x27;s even some metadata (<code>post_only_meta</code>) that only exists in the post/legacy version.</p>
<p>Any other order fields or metadata not listed are understood to be equal in both order versions.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos diff 100126</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Differences found for order 100126:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+---------------------------+---------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| property           | hpos                      | post                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+---------------------------+---------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| status             | completed                 | pending                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| total              | 567.25                    | 267.25                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| date_modified      | 2024-04-04T15:32:27+00:00 | 2024-04-04T19:00:26+00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| billing_first_name | Hans                      | Jans                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| post_only_meta     |                           | why not?                  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+---------------------------+---------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-3---json-output">Example 3 - JSON output<a href="#example-3---json-output" class="hash-link" aria-label="Direct link to Example 3 - JSON output" title="Direct link to Example 3 - JSON output">​</a></h4>
<p>You can also get the output in various formats (<code>json</code>, <code>csv</code> or <code>list</code> -the default-), which can be useful for exporting differences from various orders to a file.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos diff 100126 --format=json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Differences found for order 100126:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[{&quot;property&quot;:&quot;status&quot;,&quot;hpos&quot;:&quot;completed&quot;,&quot;post&quot;:&quot;pending&quot;},{&quot;property&quot;:&quot;total&quot;,&quot;hpos&quot;:&quot;567.25&quot;,&quot;post&quot;:&quot;267.25&quot;},{&quot;property&quot;:&quot;date_modified&quot;,&quot;hpos&quot;:&quot;2024-04-04T15:32:27+00:00&quot;,&quot;post&quot;:&quot;2024-04-04T19:00:26+00:00&quot;},{&quot;property&quot;:&quot;billing_first_name&quot;,&quot;hpos&quot;:&quot;Hans&quot;,&quot;post&quot;:&quot;Jans&quot;},{&quot;property&quot;:&quot;post_only_meta&quot;,&quot;hpos&quot;:&quot;&quot;,&quot;post&quot;:&quot;why not?&quot;}]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-hpos-backfill"><code>wc hpos backfill</code><a href="#wc-hpos-backfill" class="hash-link" aria-label="Direct link to wc-hpos-backfill" title="Direct link to wc-hpos-backfill">​</a></h3>
<p>The backfill command can be used to selectively migrate order data (or whole orders) from either the legacy or HPOS datastore to the other one. It&#x27;s very useful to reconcile sync or migration mishaps.</p>
<p>The exact syntax for this command is as follows:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wp wc hpos backfill &lt;order_id&gt; --from=&lt;datastore&gt; --to=&lt;datastore&gt; [--meta_keys=&lt;meta_keys&gt;] [--props=&lt;props&gt;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You have to specify which datastore to use as source (either <code>posts</code> or <code>hpos</code>) and which one to use as destination. The <code>--meta_keys</code> and <code>--props</code> arguments receive a comma separated list of meta keys and order properties, which can be used to move only certain data from one datastore to the other, instead of the whole order.</p>
<p>Note that <code>wp wc hpos backfill</code> differs from <code>wp wc hpos sync</code> in various ways:</p>
<ul>
<li>You can specify which order to operate on, which gives you more control for one-off operations.</li>
<li>It lets you move order data between datastores irrespective of what the current order storage is in WC settings. In contrast, <code>wp wc hpos sync</code> will only sync data from the current datastore to the other.</li>
<li>In addition to letting you migrate full orders, it lets you choose which bits of data (order fields or metadata) to migrate.</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1---migrate-a-full-order-from-hpos-to-posts">Example 1 - Migrate a full order from HPOS to posts<a href="#example-1---migrate-a-full-order-from-hpos-to-posts" class="hash-link" aria-label="Direct link to Example 1 - Migrate a full order from HPOS to posts" title="Direct link to Example 1 - Migrate a full order from HPOS to posts">​</a></h4>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos backfill 99709</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: Order 99709 backfilled from hpos to posts.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2---migrate-metadata">Example 2 - Migrate metadata<a href="#example-2---migrate-metadata" class="hash-link" aria-label="Direct link to Example 2 - Migrate metadata" title="Direct link to Example 2 - Migrate metadata">​</a></h4>
<p>Continuing with example 2 from the previous section, we can see how to migrate just one key of metadata from posts to HPOS.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos backfill 100126 --from=posts --to=hpos --meta_keys=post_only_meta</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: Order 100126 backfilled from posts to hpos.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you now run <code>wp wc hpos diff</code> on this order, you can see that the bit of metadata is no longer listed as a difference.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos diff 100126</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Differences found for order 100126:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+---------------------------+---------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| property           | hpos                      | post                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+---------------------------+---------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| status             | completed                 | pending                   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| total              | 567.25                    | 267.25                    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| date_modified      | 2024-04-04T15:32:27+00:00 | 2024-04-04T19:00:26+00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| billing_first_name | Hans                      | Jans                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+--------------------+---------------------------+---------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-3">Example 3<a href="#example-3" class="hash-link" aria-label="Direct link to Example 3" title="Direct link to Example 3">​</a></h4>
<p>Also following the previous example, we can now reconcile all the data as we see fit. For example, we can migrate the status from posts to HPOS and the other bits of info in the other direction.
In the end, the orders will be identical, as can be confirmed through <code>wp wc hpos diff</code>.</p>
<ol>
<li>
<p>Sync order status from posts to HPOS. This means the order will become &quot;pending&quot; in both datastores.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos backfill 100126 --from=posts --to=hpos --props=status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: Order 100126 backfilled from posts to hpos.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Sync the other properties from HPOS to posts.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos backfill 100126 --from=hpos --to=posts --props=total,date_modified,billing_first_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: Order 100126 backfilled from hpos to posts.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Are we all sync&#x27;ed yet?</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos diff 100126</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: No differences found.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wc-hpos-cleanup"><code>wc hpos cleanup</code><a href="#wc-hpos-cleanup" class="hash-link" aria-label="Direct link to wc-hpos-cleanup" title="Direct link to wc-hpos-cleanup">​</a></h3>
<p>The cleanup command can be used to remove order data from legacy tables when HPOS is enabled and compatibility mode is disabled.</p>
<p>Given this is a destructive operation, the tool won&#x27;t do anything by default. You&#x27;ll have to specify an order ID, a range of order IDs or <code>all</code> to operate on all orders.</p>
<p>The tool will also verify orders before removal, stopping if the post version seems more recent than the HPOS one. This allows closer inspection of those differences (for example, with <code>wp wc hpos diff</code>) and reconciling the data (with <a href="#wc-hpos-backfill"><code>wp wc hpos backfill</code></a>) before the deletion is executed.</p>
<p><strong>Note:</strong> This command won&#x27;t remove placeholder records (posts with type <code>shop_order_placehold</code>) from the posts table. We&#x27;re working on allowing this in the near future, but for now leave placeholders so that datastores can be switched if necessary. Metadata is removed, which is where most data is stored in the legacy order storage, so the remaining placeholder post is very lightweight.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1---error-during-cleanup">Example 1 - Error during cleanup<a href="#example-1---error-during-cleanup" class="hash-link" aria-label="Direct link to Example 1 - Error during cleanup" title="Direct link to Example 1 - Error during cleanup">​</a></h4>
<p>Cleaning up of an order that seems more recent on the posts datastore is prevented by default.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos cleanup 100126</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting cleanup for 1 order...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: An error occurred while cleaning up order 100126: Data in posts table appears to be more recent than in HPOS tables.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You can investigate the differences with <code>wp wc hpos diff</code>:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos diff 100126</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Warning: Differences found for order 100126:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+---------------------------+---------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| property      | hpos                      | post                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+---------------------------+---------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| date_modified | 2024-04-05T15:19:56+00:00 | 2024-04-05T16:39:26+00:00 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------+---------------------------+---------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If reconciling is not necessary, the <code>--force</code> flag can be used to skip the verification checks:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos cleanup 100126 --force</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting cleanup for 1 order...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HPOS cleanup  100% [=====================================================================================================================] 0:00 / 0:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: Cleanup completed for 1 order.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2---cleaning-up-a-range-of-order-ids">Example 2 - Cleaning up a range of order IDs<a href="#example-2---cleaning-up-a-range-of-order-ids" class="hash-link" aria-label="Direct link to Example 2 - Cleaning up a range of order IDs" title="Direct link to Example 2 - Cleaning up a range of order IDs">​</a></h4>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos cleanup 90000-100000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting cleanup for 865 orders...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HPOS cleanup  100% [=====================================================================================================================] 0:01 / 0:12</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: Cleanup completed for 865 orders.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-3--cleaning-up-all-orders">Example 3 -Cleaning up all orders<a href="#example-3--cleaning-up-all-orders" class="hash-link" aria-label="Direct link to Example 3 -Cleaning up all orders" title="Direct link to Example 3 -Cleaning up all orders">​</a></h4>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ wp wc hpos cleanup all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Starting cleanup for 999 orders...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">HPOS cleanup  100% [=====================================================================================================================] 0:01 / 0:05</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Success: Cleanup completed for 999 orders.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../features/high-performance-order-storage/cli-tools.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/features/high-performance-order-storage/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">High Performance Order Storage</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/features/high-performance-order-storage/enable-hpos"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Enable HPOS</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#usage-and-examples" class="table-of-contents__link toc-highlight">Usage and examples</a><ul><li><a href="#wc-hpos-status" class="table-of-contents__link toc-highlight"><code>wc hpos status</code></a></li><li><a href="#wc-hpos-enable" class="table-of-contents__link toc-highlight"><code>wc hpos enable</code></a></li><li><a href="#wc-hpos-disable" class="table-of-contents__link toc-highlight"><code>wc hpos disable</code></a></li><li><a href="#wc-hpos-count_unmigrated" class="table-of-contents__link toc-highlight"><code>wc hpos count_unmigrated</code></a></li><li><a href="#wc-hpos-sync" class="table-of-contents__link toc-highlight"><code>wc hpos sync</code></a></li><li><a href="#wc-hpos-verify_data" class="table-of-contents__link toc-highlight"><code>wc hpos verify_data</code></a></li><li><a href="#wc-hpos-diff" class="table-of-contents__link toc-highlight"><code>wc hpos diff</code></a></li><li><a href="#wc-hpos-backfill" class="table-of-contents__link toc-highlight"><code>wc hpos backfill</code></a></li><li><a href="#wc-hpos-cleanup" class="table-of-contents__link toc-highlight"><code>wc hpos cleanup</code></a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">COMMUNITY</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/woocommerce/woocommerce/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/community-slack/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wordpress.org/support/plugin/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://developer.woocommerce.com/code-of-conduct/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://developer.woocommerce.com/community-participation-guide/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Participation Guide<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">GROW WITH WOO</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://woocommerce.com/for-agencies/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Become a Woo agency partner<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/partners/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Become a Marketplace partner<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contribution/contributing">Contribute to WooCommerce</a></li></ul></div><div class="col footer__col"><div class="footer__title">MORE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developer.woocommerce.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Woo Developer Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/woocommerce/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WooCommerce Monorepo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.github.io/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Woo Storybook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Merchant Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/woocommerce-marketplace/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WooCommerce Marketplace<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/woocommerce/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Built with Docusaurus. Documentation is licensed under <a href="https://github.com/woocommerce/woocommerce/blob/trunk/plugins/woocommerce/license.txt/">GPLv3</a> and can be modified in the <a href="https://github.com/woocommerce/woocommerce/">WooCommerce Monorepo</a>.
				<div class="docusaurus-footer-for-automattic">
					<a href="https://automattic.com/">
						An
						<img src="/img/automattic.svg" alt="Automattic" class="automattic-logo automattic-logo-light">
						<img src="/img/automattic_dark.svg" alt="Automattic" class="automattic-logo automattic-logo-dark"> 
						Creation</a>
				</div></div></div></div></footer><div class="cookie-banner"><div class="cookie-banner-content"><h3>Use of your personal data</h3><p>We and our partners process your personal data (such as browsing data, IP Addresses, cookie information, and other unique identifiers) based on your consent and/or our legitimate interest to optimize our website, marketing activities, and your user experience.</p><div class="cookie-actions"><button class="cookie-accept-all">Accept All</button><button class="cookie-details-button">Customize Preferences</button></div></div></div></div>
</body>
</html>