"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[2340],{2302:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>n,metadata:()=>c,toc:()=>i});const c=JSON.parse('{"id":"block-development/cart-and-checkout-blocks/dom-events","title":"DOM events","description":"Some blocks need to react to certain events in order to display the most up to date data or behave in a certain way. That\'s the case of the Cart block, for example, that must listen to \'add to cart\' events in order to update the cart contents; or the Mini-Cart block, that gets opened every time a product is added to the cart.","source":"@site/../block-development/cart-and-checkout-blocks/dom-events.md","sourceDirName":"block-development/cart-and-checkout-blocks","slug":"/block-development/cart-and-checkout-blocks/dom-events","permalink":"/docs/block-development/cart-and-checkout-blocks/dom-events","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../block-development/cart-and-checkout-blocks/dom-events.md","tags":[],"version":"current","frontMatter":{"post_title":"DOM events","sidebar_label":"DOM Events"},"sidebar":"docsSidebar","previous":{"title":"Available slots","permalink":"/docs/block-development/cart-and-checkout-blocks/available-slot-fills"},"next":{"title":"Cart and Checkout extensibility","permalink":"/docs/block-development/cart-and-checkout-blocks/extensibility-getting-started"}}');var r=o(4848),s=o(8453);const n={post_title:"DOM events",sidebar_label:"DOM Events"},d="DOM events",a={},i=[{value:"WooCommerce core events in WooCommerce Blocks",id:"woocommerce-core-events-in-woocommerce-blocks",level:2},{value:"WooCommerce Blocks events",id:"woocommerce-blocks-events",level:2},{value:"<code>wc-blocks_adding_to_cart</code>",id:"wc-blocks_adding_to_cart",level:3},{value:"<code>wc-blocks_added_to_cart</code>",id:"wc-blocks_added_to_cart",level:3},{value:"<code>detail</code> parameters",id:"detail-parameters",level:4},{value:"<code>wc-blocks_removed_from_cart</code>",id:"wc-blocks_removed_from_cart",level:3}];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"dom-events",children:"DOM events"})}),"\n",(0,r.jsx)(t.p,{children:"Some blocks need to react to certain events in order to display the most up to date data or behave in a certain way. That's the case of the Cart block, for example, that must listen to 'add to cart' events in order to update the cart contents; or the Mini-Cart block, that gets opened every time a product is added to the cart."}),"\n",(0,r.jsx)(t.h2,{id:"woocommerce-core-events-in-woocommerce-blocks",children:"WooCommerce core events in WooCommerce Blocks"}),"\n",(0,r.jsxs)(t.p,{children:["WooCommerce core uses jQuery events to trigger and listen to certain events, like when a product is added or removed from the cart. In WooCommerce Blocks, we moved away from using jQuery, but we still need to listen to those events. To achieve that, we have a utility named ",(0,r.jsx)(t.a,{href:"https://github.com/woocommerce/woocommerce-gutenberg-products-block/blob/3f7c3e517d7bf13008a22d0c2eb89434a9c35ae7/assets/js/base/utils/legacy-events.ts#L79-L106",children:(0,r.jsx)(t.code,{children:"translatejQueryEventToNative()"})})," that listens to those jQuery events, and every time one is triggered, it triggers an associated DOM native event (with the ",(0,r.jsx)(t.code,{children:"wc-blocks_"})," prefix)."]}),"\n",(0,r.jsx)(t.h2,{id:"woocommerce-blocks-events",children:"WooCommerce Blocks events"}),"\n",(0,r.jsx)(t.h3,{id:"wc-blocks_adding_to_cart",children:(0,r.jsx)(t.code,{children:"wc-blocks_adding_to_cart"})}),"\n",(0,r.jsxs)(t.p,{children:["This event is the equivalent to the jQuery event ",(0,r.jsx)(t.code,{children:"adding_to_cart"})," triggered by WooCommerce core. It indicates that the process of adding a product to the cart was sent to the server, but there is still no indication on whether the product was successfully added or not."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.em,{children:"Example usage in WC Blocks:"})," Mini-Cart block listens to this event to append its dependencies."]}),"\n",(0,r.jsx)(t.h3,{id:"wc-blocks_added_to_cart",children:(0,r.jsx)(t.code,{children:"wc-blocks_added_to_cart"})}),"\n",(0,r.jsxs)(t.p,{children:["This event is the equivalent to the jQuery event ",(0,r.jsx)(t.code,{children:"added_to_cart"})," triggered by WooCommerce core. It indicates that the process of adding a product to the cart has finished with success."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.em,{children:"Example usage in WC Blocks:"})," Cart and Mini-Cart blocks (via the ",(0,r.jsx)(t.code,{children:"useStoreCart()"})," hook) listen to this event to know if they need to update their contents."]}),"\n",(0,r.jsxs)(t.h4,{id:"detail-parameters",children:[(0,r.jsx)(t.code,{children:"detail"})," parameters"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Parameter"}),(0,r.jsx)(t.th,{children:"Type"}),(0,r.jsx)(t.th,{children:"Default value"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"preserveCartData"})}),(0,r.jsx)(t.td,{children:"boolean"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"false"})}),(0,r.jsxs)(t.td,{children:["Whether Cart data in the store should be preserved. By default, it's ",(0,r.jsx)(t.code,{children:"false"})," so any ",(0,r.jsx)(t.code,{children:"wc-blocks_added_to_cart"})," event will invalidate cart data and blocks listening to it will refetch cart data again. However, if the code triggering the event already updates the store (ie: All Products block), it can set ",(0,r.jsx)(t.code,{children:"preserveCartData: true"})," to avoid the other blocks refetching the data again."]})]})})]}),"\n",(0,r.jsx)(t.h3,{id:"wc-blocks_removed_from_cart",children:(0,r.jsx)(t.code,{children:"wc-blocks_removed_from_cart"})}),"\n",(0,r.jsxs)(t.p,{children:["This event is the equivalent to the jQuery event ",(0,r.jsx)(t.code,{children:"removed_from_cart"})," triggered by WooCommerce core. It indicates that a product has been removed from the cart."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.em,{children:"Example usage in WC Blocks:"})," Cart and Mini-Cart blocks (via the ",(0,r.jsx)(t.code,{children:"useStoreCart()"})," hook) listen to this event to know if they need to update their contents."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>n,x:()=>d});var c=o(6540);const r={},s=c.createContext(r);function n(e){const t=c.useContext(s);return c.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:n(e.components),c.createElement(s.Provider,{value:t},e.children)}}}]);