"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[6650],{660:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"contribution/contributing/deprecation-in-core","title":"Deprecation in core","description":"Deprecation is a method of discouraging usage of a feature or practice in favour of something else without breaking backwards compatibility or totally prohibiting its usage. To quote the Wikipedia article on Deprecation:","source":"@site/../contribution/contributing/deprecation-in-core.md","sourceDirName":"contribution/contributing","slug":"/contribution/contributing/deprecation-in-core","permalink":"/docs/contribution/contributing/deprecation-in-core","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../contribution/contributing/deprecation-in-core.md","tags":[],"version":"current","frontMatter":{"post_title":"Deprecation in core","sidebar_label":"Deprecation in core"},"sidebar":"docsSidebar","previous":{"title":"Assessing PR impact","permalink":"/docs/contribution/contributing/deciding-pr-high-impact"},"next":{"title":"Minification of SCSS and JS","permalink":"/docs/contribution/contributing/minification-of-SCSS-and-JS"}}');var t=i(4848),r=i(8453);const a={post_title:"Deprecation in core",sidebar_label:"Deprecation in core"},s="Deprecation in core",c={},d=[{value:"How do we deprecate functions?",id:"how-do-we-deprecate-functions",level:2},{value:"What happens when a deprecated function is called?",id:"what-happens-when-a-deprecated-function-is-called",level:2},{value:"Warnings in production (store owners - read this!)",id:"warnings-in-production-store-owners---read-this",level:3}];function l(e){const n={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"deprecation-in-core",children:"Deprecation in core"})}),"\n",(0,t.jsx)(n.p,{children:"Deprecation is a method of discouraging usage of a feature or practice in favour of something else without breaking backwards compatibility or totally prohibiting its usage. To quote the Wikipedia article on Deprecation:"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"While a deprecated software feature remains in the software, its use may raise warning messages recommending alternative practices; deprecated status may also indicate the feature will be removed in the future. Features are deprecated rather than immediately removed, to provide backward compatibility and give programmers time to bring affected code into compliance with the new standard."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"There are various reasons why a function, method, or feature may be deprecated. To name a few:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"We may want to remove a function we do not use any longer."}),"\n",(0,t.jsx)(n.li,{children:"We may decide to change or improve how a function works, but due to breaking backwards compatibility we need to deprecate the old function instead."}),"\n",(0,t.jsx)(n.li,{children:"We may want to standardise naming conventions."}),"\n",(0,t.jsx)(n.li,{children:"We may find opportunities to merge similar functions to avoid reusing the same code in difference places."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Whilst deprecation notices are not ideal or attractive, they are just ",(0,t.jsx)(n.em,{children:"warnings"})," - not errors."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:[(0,t.jsx)(n.em,{children:"Store owners:"})," deprecation warnings do not mean your store is broken, it just serves as a reminder that code will need to be updated."]})}),"\n",(0,t.jsx)(n.h2,{id:"how-do-we-deprecate-functions",children:"How do we deprecate functions?"}),"\n",(0,t.jsx)(n.p,{children:"When we deprecate something in WooCommerce, we take a few actions to make it clear to developers and to maintain backwards compatibility."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["We add a docblock to the function or method showing what version the function was deprecated in, e.g., ",(0,t.jsx)(n.code,{children:"@deprecated 2.x.x"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["We add a warning notice using our own ",(0,t.jsx)(n.code,{children:"wc_deprecated_function"})," function that shows what version, what function, and what replacement is available. More on that in a bit."]}),"\n",(0,t.jsx)(n.li,{children:"We remove usage of the deprecated function throughout the codebase."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The function or method itself is not removed from the codebase. This preserves backwards compatibility until removed - usually over a year or several major releases into the future."}),"\n",(0,t.jsxs)(n.p,{children:["We mentioned ",(0,t.jsx)(n.code,{children:"wc_deprecated_function"})," above - this is our own wrapper for the ",(0,t.jsx)(n.code,{children:"_deprecated_function"})," WordPress function. It works very similar except for that it forces a log entry instead of displaying it - regardless of the value of ",(0,t.jsx)(n.code,{children:"WP_DEBUG"})," during AJAX events - so that AJAX requests are not broken by the notice."]}),"\n",(0,t.jsx)(n.h2,{id:"what-happens-when-a-deprecated-function-is-called",children:"What happens when a deprecated function is called?"}),"\n",(0,t.jsx)(n.p,{children:"If an extension or theme uses a deprecated function, you may see a warning like the following example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"Notice: woocommerce_show_messages is deprecated since version 2.1! Use wc_print_notices instead. in /srv/www/wordpress-default/wp-includes/functions.php on line 3783\n"})}),"\n",(0,t.jsx)(n.p,{children:"This tells you what is deprecated, since when, where, and what replacement is available."}),"\n",(0,t.jsxs)(n.p,{children:["Notices and warnings are usually shown inline, but there are some plugins you can use to collect and show them nicely in the footer of your site. Consider, for example, ",(0,t.jsx)(n.a,{href:"https://wordpress.org/plugins/query-monitor/",children:"Query Monitor"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"warnings-in-production-store-owners---read-this",children:"Warnings in production (store owners - read this!)"}),"\n",(0,t.jsx)(n.p,{children:"Showing PHP notices and warnings (or any error for that matter) is highly discouraged on your production stores. They can reveal information about your setup that a malicious user could exploit to gain access to your store. Make sure they are hidden from public view and optionally logged instead."}),"\n",(0,t.jsxs)(n.p,{children:["In WordPress you can do this by adding or modifying some constants in ",(0,t.jsx)(n.code,{children:"wp-config.php"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"define( 'WP_DEBUG', false );\n"})}),"\n",(0,t.jsxs)(n.p,{children:["On some hosts, errors may still be visible due to the hosts configuration. To force them to not display you might need to add this to ",(0,t.jsx)(n.code,{children:"wp-config.php"})," as well:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"@ini_set( 'display_errors', 0 );\n"})}),"\n",(0,t.jsx)(n.p,{children:"To log notices instead of displaying them, use:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"define( 'WP_DEBUG', true );\ndefine( 'WP_DEBUG_LOG', true );\ndefine( 'WP_DEBUG_DISPLAY', false );\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The default location of the WordPress error log is ",(0,t.jsx)(n.code,{children:"wp-content/debug.log"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["Note that this log can be publicly accessible, which could also pose a security risk. To keep it private, you can use a plugin or define a custom path in ",(0,t.jsx)(n.code,{children:"wp-config.php"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-php",children:"<?php\n/**\n * Plugin Name: Custom Debug Log Path\n */\n\nini_set( 'error_log', '/path/to/site/logs/debug.log' );\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var o=i(6540);const t={},r=o.createContext(t);function a(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);