"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[3244],{7449:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"theming/theme-development/thumbnail-image-regeneration","title":"Thumbnail image regeneration","description":"WooCommerce 3.3 introduced thumbnail regeneration functionality. In the past when image size settings were changed you would need to install an external plugin and then have it regenerate all WordPress image thumbnails before the changes would be visible.","source":"@site/../theming/theme-development/thumbnail-image-regeneration.md","sourceDirName":"theming/theme-development","slug":"/theming/theme-development/thumbnail-image-regeneration","permalink":"/docs/theming/theme-development/thumbnail-image-regeneration","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../theming/theme-development/thumbnail-image-regeneration.md","tags":[],"version":"current","frontMatter":{"post_title":"Thumbnail image regeneration"},"sidebar":"docsSidebar","previous":{"title":"Theme design and user experience guidelines","permalink":"/docs/theming/theme-development/theme-design-ux-guidelines"},"next":{"title":"Cart and Checkout blocks","permalink":"/docs/category/cart-and-checkout-blocks"}}');var o=i(4848),a=i(8453);const r={post_title:"Thumbnail image regeneration"},s="Thumbnail image regeneration",l={},c=[{value:"How it works",id:"how-it-works",level:2},{value:"Background jobs and BasicAuth",id:"background-jobs-and-basicauth",level:3},{value:"Viewing background regeneration logs",id:"viewing-background-regeneration-logs",level:3},{value:"Cancelling a background regeneration job",id:"cancelling-a-background-regeneration-job",level:3},{value:"CDN plugins",id:"cdn-plugins",level:3},{value:"How to disable background regeneration",id:"how-to-disable-background-regeneration",level:2},{value:"Using Jetpack Photon instead",id:"using-jetpack-photon-instead",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"thumbnail-image-regeneration",children:"Thumbnail image regeneration"})}),"\n",(0,o.jsx)(n.p,{children:"WooCommerce 3.3 introduced thumbnail regeneration functionality. In the past when image size settings were changed you would need to install an external plugin and then have it regenerate all WordPress image thumbnails before the changes would be visible."}),"\n",(0,o.jsx)(n.p,{children:"The new image regeneration functionality, combined with the introduction of WooCommerce image settings in the customizer, now ensure that as you make changes to your store image settings you can preview the changes in real-time within the customizer."}),"\n",(0,o.jsx)(n.h2,{id:"how-it-works",children:"How it works"}),"\n",(0,o.jsx)(n.p,{children:"When you make changes to image sizes/aspect ratios in the customiser, or if your theme changes image sizes, WC will detect these changes and queue a background regeneration job. The 2 events which can trigger this are:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Publishing settings in the customizer"}),"\n",(0,o.jsx)(n.li,{children:"Switching themes"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Whilst in the customizer, size changes can be previewed due to our on-the-fly image regen. These changes will not be persisted to the live site until you hit publish."}),"\n",(0,o.jsx)(n.h3,{id:"background-jobs-and-basicauth",children:"Background jobs and BasicAuth"}),"\n",(0,o.jsx)(n.p,{children:"If your site is behind BasicAuth, both async requests and background processes will fail to complete. This is because WP Background Processing relies on the WordPress HTTP API, which requires you to attach your BasicAuth credentials to requests."}),"\n",(0,o.jsxs)(n.p,{children:["You can pass these credentials via a snippet, see:",(0,o.jsx)(n.a,{href:"https://github.com/A5hleyRich/wp-background-processing#basicauth",children:"BasicAuth documentation"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"viewing-background-regeneration-logs",children:"Viewing background regeneration logs"}),"\n",(0,o.jsxs)(n.p,{children:["To view the logs for background image regeneration go to ",(0,o.jsx)(n.code,{children:"WooCommerce > Status > Logs"})," and select the ",(0,o.jsx)(n.code,{children:"wc-background-regeneration"})," log from the dropdown."]}),"\n",(0,o.jsx)(n.p,{children:"This log file will list images which have been processed and when the job was completed or cancelled."}),"\n",(0,o.jsx)(n.h3,{id:"cancelling-a-background-regeneration-job",children:"Cancelling a background regeneration job"}),"\n",(0,o.jsx)(n.p,{children:"As of WooCommerce 3.3.2 you will see an admin notice when background image regeneration is running. Within this notice is a link to cancel the job."}),"\n",(0,o.jsxs)(n.p,{children:["Cancelling the job will stop more thumbnails being regenerated. If image sizes do not look correct inside your catalog, you'll need to run thumbnail regeneration manually (either using our tool, or using another plugin such as ",(0,o.jsx)(n.a,{href:"https://en-gb.wordpress.org/plugins/regenerate-thumbnails/",children:"Regenerate Thumbnails"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"cdn-plugins",children:"CDN plugins"}),"\n",(0,o.jsx)(n.p,{children:"Most CDN plugins listen to WordPress core hooks and upload generated thumbnails to their service once created. This will continue to function with our background image regeneration code. Generation may be slower due to uploading the images to the 3rd party service as it progresses."}),"\n",(0,o.jsx)(n.h2,{id:"how-to-disable-background-regeneration",children:"How to disable background regeneration"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"woocommerce_background_image_regeneration"})," filter can be used to disable background regeneration completely. Example code:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-php",children:"add_filter( 'woocommerce_background_image_regeneration', '__return_false' );\n"})}),"\n",(0,o.jsx)(n.p,{children:"Once disabled, you'll need to regenerate thumbnails manually using another tool should you change image size settings and need new thumbnails."}),"\n",(0,o.jsxs)(n.p,{children:["Alternatively, you can use the ",(0,o.jsx)(n.a,{href:"https://jetpack.com/support/photon/",children:"Jetpack Photon module"})," which can do image resizing on the fly and will be used instead of background regeneration as of WooCommerce 3.3.2."]}),"\n",(0,o.jsx)(n.h2,{id:"using-jetpack-photon-instead",children:"Using Jetpack Photon instead"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://jetpack.com/",children:"Jetpack"})," is a plugin by Automattic, makers of WordPress.com. It gives your self-hosted WordPress site some of the functionality that is available to WordPress.com-hosted sites."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://jetpack.com/support/photon/",children:"The Photon module"})," makes the images on your site be served from WordPress.com's global content delivery network (CDN) which should speed up the loading of images."]}),"\n",(0,o.jsx)(n.p,{children:"Photon can create thumbnails on the fly which means you'll never need to use our background image regeneration functionality."})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>s});var t=i(6540);const o={},a=t.createContext(o);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);