"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[3076],{4474:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"contribution/contributing/common-issues","title":"Common issues","description":"This page aims to document a comprehensive list of known issues, commonly encountered problems, and their solutions or workarounds. If you have encountered an issue that is not mentioned here and should be, please don\'t hesitate to add to the list.","source":"@site/../contribution/contributing/common-issues.md","sourceDirName":"contribution/contributing","slug":"/contribution/contributing/common-issues","permalink":"/docs/contribution/contributing/common-issues","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../contribution/contributing/common-issues.md","tags":[],"version":"current","frontMatter":{"post_title":"Common issues","sidebar_label":"Common issues"},"sidebar":"docsSidebar","previous":{"title":"API critical flows","permalink":"/docs/contribution/contributing/api-critical-flows"},"next":{"title":"Assessing PR impact","permalink":"/docs/contribution/contributing/deciding-pr-high-impact"}}');var s=o(4848),i=o(8453);const r={post_title:"Common issues",sidebar_label:"Common issues"},a="Common issues",c={},l=[{value:"Composer error on <code>Automattic\\Jetpack\\Autoloader\\AutoloadGenerator</code>",id:"composer-error-on-automatticjetpackautoloaderautoloadgenerator",level:2},{value:"VVV: HostsUpdater vagrant plugin error",id:"vvv-hostsupdater-vagrant-plugin-error",level:2},{value:"VVV: <code>install-wp-tests.sh</code> error",id:"vvv-install-wp-testssh-error",level:2},{value:"Timeout / 404 errors while running e2e tests",id:"timeout--404-errors-while-running-e2e-tests",level:2},{value:"Docker container couldn&#39;t be built when attempting e2e test",id:"docker-container-couldnt-be-built-when-attempting-e2e-test",level:2},{value:"Set up WooCommerce Payments dev mode",id:"set-up-woocommerce-payments-dev-mode",level:2},{value:"WooCommerce Admin install timestamp",id:"woocommerce-admin-install-timestamp",level:2},{value:"Reset the onboarding wizard",id:"reset-the-onboarding-wizard",level:2},{value:"Enable tracks debugging in the console",id:"enable-tracks-debugging-in-the-console",level:2},{value:"Running PHP unit tests using Vagrant (VVV)",id:"running-php-unit-tests-using-vagrant-vvv",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"common-issues",children:"Common issues"})}),"\n",(0,s.jsx)(n.p,{children:"This page aims to document a comprehensive list of known issues, commonly encountered problems, and their solutions or workarounds. If you have encountered an issue that is not mentioned here and should be, please don't hesitate to add to the list."}),"\n",(0,s.jsxs)(n.h2,{id:"composer-error-on-automatticjetpackautoloaderautoloadgenerator",children:["Composer error on ",(0,s.jsx)(n.code,{children:"Automattic\\Jetpack\\Autoloader\\AutoloadGenerator"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[ErrorException]\n  Declaration of Automattic\\Jetpack\\Autoloader\\AutoloadGenerator::dump(Composer\\Config $config, Composer\\Repository\\Inst\n  alledRepositoryInterface $localRepo, Composer\\Package\\PackageInterface $mainPackage, Composer\\Installer\\InstallationMa\n  nager $installationManager, $targetDir, $scanPsrPackages = false, $suffix = NULL) should be compatible with Composer\\A\n  utoload\\AutoloadGenerator::dump(Composer\\Config $config, Composer\\Repository\\InstalledRepositoryInterface $localRepo,\n  Composer\\Package\\RootPackageInterface $rootPackage, Composer\\Installer\\InstallationManager $installationManager, $targ\n  etDir, $scanPsrPackages = false, $suffix = '')\n"})}),"\n",(0,s.jsxs)(n.p,{children:["A recent ",(0,s.jsx)(n.a,{href:"https://github.com/composer/composer/commit/b574f10d9d68acfeb8e36cad0b0b25a090140a3b#diff-67d1dfefa9c7b1c7e0b04b07274628d812f82cd82fae635c0aeba643c02e8cd8",children:"change"})," in composer 2.0.7 made our autoloader incompatible with the new ",(0,s.jsx)(n.code,{children:"AutoloadGenerator"})," signature. Try to downgrading to composer 2.0.6 by using ",(0,s.jsx)(n.code,{children:"composer self-update 2.0.6"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"vvv-hostsupdater-vagrant-plugin-error",children:"VVV: HostsUpdater vagrant plugin error"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"...vagrant-hostsupdater/HostsUpdater.rb:126:in ``digest': no implicit conversion of nil into String (TypeError)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["You might be running an unsupported version of Vagrant. At the time of writing, VVV works with Vagrant 2.2.7. Please check VVV's ",(0,s.jsx)(n.a,{href:"https://github.com/Varying-Vagrant-Vagrants/VVV#minimum-system-requirements",children:"requirements"}),"."]}),"\n",(0,s.jsxs)(n.h2,{id:"vvv-install-wp-testssh-error",children:["VVV: ",(0,s.jsx)(n.code,{children:"install-wp-tests.sh"})," error"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mysqladmin: CREATE DATABASE failed; error: 'Access denied for user 'wp'@'localhost' to database 'wordpress-one-tests''\n"})}),"\n",(0,s.jsx)(n.p,{children:"To fix:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Open MySQL with ",(0,s.jsx)(n.code,{children:"sudo mysql"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Run ",(0,s.jsx)(n.code,{children:"GRANT ALL PRIVILEGES ON * . * TO 'wp'@'localhost';"}),". Exit by typing ",(0,s.jsx)(n.code,{children:"exit;"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Run the ",(0,s.jsx)(n.code,{children:"install-wp-tests.sh"})," script again."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"timeout--404-errors-while-running-e2e-tests",children:"Timeout / 404 errors while running e2e tests"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:" Store owner can complete onboarding wizard \u203a can complete the product types section\n\n    TimeoutError: waiting for function failed: timeout 30000ms exceeded\n\n      1 | export const waitForElementCount = function ( page, domSelector, count ) {\n    > 2 | \treturn page.waitForFunction(\n        | \t            ^\n      3 | \t\t( domSelector, count ) => {\n      4 | \t\t\treturn document.querySelectorAll( domSelector ).length === count;\n      5 | \t\t},\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Timeouts or 404 errors in the e2e tests signal that the existing build might be broken. Run ",(0,s.jsx)(n.code,{children:"npm install && npm run clean && npm run build"})," to generate a fresh build. It should also be noted that some of our npm scripts also remove the current build, so it's a good practice to always run a build before running e2e tests."]}),"\n",(0,s.jsx)(n.h2,{id:"docker-container-couldnt-be-built-when-attempting-e2e-test",children:"Docker container couldn't be built when attempting e2e test"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"Thu Dec  3 11:55:56 +08 2020 - Docker container is still being built\nThu Dec  3 11:56:06 +08 2020 - Docker container is still being built\nThu Dec  3 11:56:16 +08 2020 - Docker container is still being built\nThu Dec  3 11:56:26 +08 2020 - Docker container couldn't be built\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! @woocommerce/e2e-environment@0.1.6 test:e2e: `bash ./bin/wait-for-build.sh && ./bin/e2e-test-integration.js`\nnpm ERR! Exit status 1\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Ensure that Docker is running. While the script says ",(0,s.jsx)(n.code,{children:"Docker container is still being built"}),", it is not actually responsible for running Docker; it's just waiting for an existing docker instance to respond. Run ",(0,s.jsx)(n.code,{children:"npm run docker:up"})," if it's not."]}),"\n",(0,s.jsx)(n.h2,{id:"set-up-woocommerce-payments-dev-mode",children:"Set up WooCommerce Payments dev mode"}),"\n",(0,s.jsxs)(n.p,{children:["Add this to ",(0,s.jsx)(n.code,{children:"wp-config.php"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"define( 'WCPAY_DEV_MODE', true );\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Also see ",(0,s.jsx)(n.a,{href:"https://woocommerce.com/document/woopayments/testing-and-troubleshooting/sandbox-mode/",children:"this document"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"woocommerce-admin-install-timestamp",children:"WooCommerce Admin install timestamp"}),"\n",(0,s.jsxs)(n.p,{children:["To get the install timestamp (used in ",(0,s.jsx)(n.code,{children:"wc_admin_active_for()"})," in ",(0,s.jsx)(n.code,{children:"NoteTraits"})," for example) try this SQL:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"SELECT * FROM wp_options WHERE option_name = 'woocommerce_admin_install_timestamp'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"reset-the-onboarding-wizard",children:"Reset the onboarding wizard"}),"\n",(0,s.jsxs)(n.p,{children:["Delete the ",(0,s.jsx)(n.code,{children:"woocommerce_onboarding_profile"})," option:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sql",children:"DELETE FROM wp_options WHERE option_name = 'woocommerce_onboarding_profile'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"enable-tracks-debugging-in-the-console",children:"Enable tracks debugging in the console"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"localStorage.setItem( 'debug', 'wc-admin:tracks' );\n"})}),"\n",(0,s.jsx)(n.p,{children:'and set Chrome\'s log level "verbose" to checked.'}),"\n",(0,s.jsx)(n.h2,{id:"running-php-unit-tests-using-vagrant-vvv",children:"Running PHP unit tests using Vagrant (VVV)"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["SSH into Vagrant box (",(0,s.jsx)(n.code,{children:"vagrant ssh"}),")"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"cd /srv/www/<WP_INSTANCE>/public_html/wp-content/plugins/woocommerce-admin"})}),"\n",(0,s.jsxs)(n.li,{children:["Set up: ",(0,s.jsx)(n.code,{children:"bin/install-wp-tests.sh wc-admin-tests root root"})]}),"\n",(0,s.jsxs)(n.li,{children:["Fast tests: ",(0,s.jsx)(n.code,{children:"./vendor/bin/phpunit --group fast"})]}),"\n",(0,s.jsxs)(n.li,{children:["All tests: ",(0,s.jsx)(n.code,{children:"./vendor/bin/phpunit"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You might need to ",(0,s.jsx)(n.code,{children:"composer install"})," if ",(0,s.jsx)(n.code,{children:"phpunit"})," doesn't exist."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>r,x:()=>a});var t=o(6540);const s={},i=t.createContext(s);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);