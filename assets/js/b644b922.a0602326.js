"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[3356],{8453:(o,e,t)=>{t.d(e,{R:()=>s,x:()=>i});var r=t(6540);const n={},c=r.createContext(n);function s(o){const e=r.useContext(c);return r.useMemo((function(){return"function"==typeof o?o(e):{...e,...o}}),[e,o])}function i(o){let e;return e=o.disableParentContext?"function"==typeof o.components?o.components(n):o.components||n:s(o.components),r.createElement(c.Provider,{value:e},o.children)}},8701:(o,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>i,default:()=>l,frontMatter:()=>s,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"code-snippets/using_nginx_server_to_protect_your_uploads_directory","title":"Using NGINX server to protect your upload directory","description":"If you using NGINX server for your site along with X-Accel-Redirect/X-Sendfile or Force Downloads download method, it is necessary that you add this configuration for better security:","source":"@site/../code-snippets/using_nginx_server_to_protect_your_uploads_directory.md","sourceDirName":"code-snippets","slug":"/code-snippets/using_nginx_server_to_protect_your_uploads_directory","permalink":"/docs/code-snippets/using_nginx_server_to_protect_your_uploads_directory","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../code-snippets/using_nginx_server_to_protect_your_uploads_directory.md","tags":[],"version":"current","frontMatter":{"post_title":"Using NGINX server to protect your upload directory","sidebar_label":"NGINX server to protect upload directory","current wccom url":"https://woocommerce.com/document/digital-downloadable-product-handling/#protecting-your-uploads-directory"},"sidebar":"docsSidebar","previous":{"title":"Useful core functions","permalink":"/docs/code-snippets/useful-functions"},"next":{"title":"Contribute to Woo","permalink":"/docs/contribution/contributing/"}}');var n=t(4848),c=t(8453);const s={post_title:"Using NGINX server to protect your upload directory",sidebar_label:"NGINX server to protect upload directory","current wccom url":"https://woocommerce.com/document/digital-downloadable-product-handling/#protecting-your-uploads-directory"},i="Using NGINX server to protect your upload directory",d={},a=[];function u(o){const e={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",strong:"strong",...(0,c.R)(),...o.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.header,{children:(0,n.jsx)(e.h1,{id:"using-nginx-server-to-protect-your-upload-directory",children:"Using NGINX server to protect your upload directory"})}),"\n",(0,n.jsxs)(e.p,{children:["If you using NGINX server for your site along with ",(0,n.jsx)(e.strong,{children:"X-Accel-Redirect/X-Sendfile"})," or ",(0,n.jsx)(e.strong,{children:"Force Downloads"})," download method, it is necessary that you add this configuration for better security:"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-php",children:'# Protect WooCommerce upload folder from being accessed directly.\n# You may want to change this config if you are using "X-Accel-Redirect/X-Sendfile" or "Force Downloads" method for downloadable products.\n# Place this config towards the end of "server" block in NGINX configuration.\nlocation ~* /wp-content/uploads/woocommerce_uploads/ {\n    if ( $upstream_http_x_accel_redirect = "" ) {\n        return 403;\n    }\n    internal;\n}\n'})}),"\n",(0,n.jsxs)(e.p,{children:["And this the configuration in case you are using ",(0,n.jsx)(e.strong,{children:"Redirect only"})," download method:"]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-php",children:'# Protect WooCommerce upload folder from being accessed directly.\n# You may want to change this config if you are using "Redirect Only" method for downloadable products.\n# Place this config towards the end of "server" block in NGINX configuration.\nlocation ~* /wp-content/uploads/woocommerce_uploads/ {\n    autoindex off;\n}\n'})}),"\n",(0,n.jsx)(e.p,{children:"If you do not know which web server you are using, please reach out to your host along with a link to this support page."})]})}function l(o={}){const{wrapper:e}={...(0,c.R)(),...o.components};return e?(0,n.jsx)(e,{...o,children:(0,n.jsx)(u,{...o})}):u(o)}}}]);