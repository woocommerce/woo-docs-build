"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[4177],{5211:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"block-development/cart-and-checkout-blocks/extensibility-getting-started","title":"Getting started with Cart and Checkout extensibility","description":"This document is a high-level overview of the moving parts required to extend the Cart and Checkout blocks.","source":"@site/../block-development/cart-and-checkout-blocks/extensibility-getting-started.md","sourceDirName":"block-development/cart-and-checkout-blocks","slug":"/block-development/cart-and-checkout-blocks/extensibility-getting-started","permalink":"/docs/block-development/cart-and-checkout-blocks/extensibility-getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../block-development/cart-and-checkout-blocks/extensibility-getting-started.md","tags":[],"version":"current","frontMatter":{"post_title":"Cart and Checkout extensibility","sidebar_label":"Cart and Checkout extensibility"},"sidebar":"docsSidebar","previous":{"title":"DOM Events","permalink":"/docs/block-development/cart-and-checkout-blocks/dom-events"},"next":{"title":"Frequently asked questions","permalink":"/docs/block-development/cart-and-checkout-blocks/faq"}}');var i=o(4848),s=o(8453);const r={post_title:"Cart and Checkout extensibility",sidebar_label:"Cart and Checkout extensibility"},c="Getting started with Cart and Checkout extensibility",a={},l=[{value:"Example block template package",id:"example-block-template-package",level:2},{value:"Front-end extensibility",id:"front-end-extensibility",level:2},{value:"Build system",id:"build-system",level:3},{value:"<code>WooCommerceDependencyExtractionWebpackPlugin</code>",id:"woocommercedependencyextractionwebpackplugin",level:4},{value:"Creating a block",id:"creating-a-block",level:3},{value:"Modifying existing values on the front-end",id:"modifying-existing-values-on-the-front-end",level:3},{value:"Importing WooCommerce components into your extension",id:"importing-woocommerce-components-into-your-extension",level:3},{value:"Importing WooCommerce (React) hooks",id:"importing-woocommerce-react-hooks",level:3},{value:"Back-end extensibility",id:"back-end-extensibility",level:2},{value:"Modifying information during the Checkout process",id:"modifying-information-during-the-checkout-process",level:3},{value:"Extending Store API",id:"extending-store-api",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"getting-started-with-cart-and-checkout-extensibility",children:"Getting started with Cart and Checkout extensibility"})}),"\n",(0,i.jsx)(t.p,{children:"This document is a high-level overview of the moving parts required to extend the Cart and Checkout blocks."}),"\n",(0,i.jsxs)(t.p,{children:["To get started, it is recommended to first read the ",(0,i.jsx)(t.a,{href:"https://developer.wordpress.org/block-editor/getting-started/devenv/",children:"Block Development Environment"})," documentation from WordPress and follow ",(0,i.jsx)(t.a,{href:"https://developer.wordpress.org/block-editor/getting-started/tutorial/",children:"Tutorial: Build your first block\n"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"example-block-template-package",children:"Example block template package"}),"\n",(0,i.jsxs)(t.p,{children:["There is an example block template in the WooCommerce repository. Having this template set up while reading this document may help to understand some of the concepts discussed. See the ",(0,i.jsxs)(t.a,{href:"https://github.com/woocommerce/woocommerce/tree/trunk/packages/js/extend-cart-checkout-block/README.md",children:[(0,i.jsx)(t.code,{children:"@woocommerce/extend-cart-checkout-block"})," package documentation"]})," for how to install and run the example block."]}),"\n",(0,i.jsx)(t.p,{children:"(Note: the code in the repository linked above will not be very useful alone; the code there is templating code. It will be transformed into regular JS and PHP after following the README instructions.)"}),"\n",(0,i.jsx)(t.h2,{id:"front-end-extensibility",children:"Front-end extensibility"}),"\n",(0,i.jsx)(t.p,{children:"To extend the front-end of the blocks, extensions must use JavaScript. The JavaScript files must be enqueued and loaded on the page before they will have any effect."}),"\n",(0,i.jsx)(t.h3,{id:"build-system",children:"Build system"}),"\n",(0,i.jsx)(t.p,{children:"Some extensions may be very simple and include only a single JavaScript file, other extensions may be complex and the code may be split into multiple files. Either way, it is recommended that the files are bundled together and minified into a single output file. If your extension has several distinct parts that only load on specific pages, bundle splitting is recommended, though that is out of scope for this document."}),"\n",(0,i.jsxs)(t.p,{children:["To set up the build system, the recommended approach is to align with WordPress and use a JavaScript package called ",(0,i.jsx)(t.a,{href:"https://developer.wordpress.org/block-editor/reference-guides/packages/packages-scripts/",children:(0,i.jsx)(t.code,{children:"@wordpress/scripts"})}),". This package contains a script called ",(0,i.jsx)(t.code,{children:"build"}),". By default, this will build your scripts into a single output file that can be enqueued using ",(0,i.jsx)(t.code,{children:"wp_enqueue_script"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["The base configuration of the ",(0,i.jsx)(t.code,{children:"build"})," script in  ",(0,i.jsx)(t.code,{children:"@wordpress/scripts"})," can be overridden by creating a ",(0,i.jsx)(t.code,{children:"webpack.config.js"})," file in the root of your plugin. The example block shows how the base config can be extended."]}),"\n",(0,i.jsx)(t.h4,{id:"woocommercedependencyextractionwebpackplugin",children:(0,i.jsx)(t.code,{children:"WooCommerceDependencyExtractionWebpackPlugin"})}),"\n",(0,i.jsxs)(t.p,{children:["See ",(0,i.jsx)(t.a,{href:"https://github.com/WordPress/gutenberg/tree/trunk/packages/dependency-extraction-webpack-plugin",children:(0,i.jsx)(t.code,{children:"WordPress Dependency Extraction Webpack Plugin"})})," and\n",(0,i.jsx)(t.a,{href:"https://github.com/woocommerce/woocommerce/tree/trunk/packages/js/dependency-extraction-webpack-plugin#dependency-extraction-webpack-plugin",children:(0,i.jsx)(t.code,{children:"WooCommerce Dependency Extraction Webpack Plugin"})}),"."]}),"\n",(0,i.jsx)(t.p,{children:"This Webpack plugin is used to:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Externalize dependencies that are available as shared scripts or modules on WordPress sites.","\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["This means when you import something from ",(0,i.jsx)(t.code,{children:"@woocommerce/blocks-checkout"})," it resolves that path to ",(0,i.jsx)(t.code,{children:"window.wc.wcBlocksCheckout"})," without you needing to change your code. It makes your code easier to read and allows these packages to be loaded onto the page once."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.li,{children:"Add an asset file for each entry point that declares an object with the list of WordPress script or module dependencies for the entry point. The asset file also contains the current version calculated for the current source code."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:'The PHP "asset file" that this plugin outputs contains information your script needs to register itself, such as dependencies and paths.'}),"\n",(0,i.jsx)(t.p,{children:"If you have written code that is built by Webpack and using the WooCommerce Dependency Extraction Webpack Plugin, there will be an asset file output for each entry point. This asset file is a PHP file that contains information about your script, specifically dependencies and version, here's an example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",children:"<?php\nreturn array(\n  'dependencies' => array(\n    'react',\n    'wc-settings',\n    'wp-block-editor',\n    'wp-blocks',\n    'wp-components',\n    'wp-element',\n    'wp-i18n',\n    'wp-primitives'\n  ),\n  'version' => '455da4f55e1ac73b6d34'\n);\n"})}),"\n",(0,i.jsx)(t.p,{children:"When enqueueing your script, using this asset file will ensure the dependencies are loaded correctly and that the client gets the most up-to-date version of your script (the version is used to ensure your script is fetched fresh, rather than from the cache)."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",children:"<?php\n$script_path = '/build/index.js';\n$script_url  = plugins_url( $script_path, __FILE__ );\n\n$script_asset_path = dirname( __FILE__ ) . '/build/index.asset.php';\n$script_asset      = file_exists( $script_asset_path )\n  ? require $script_asset_path\n  : [\n    'dependencies' => [],\n    'version'      => $this->get_file_version( $script_path ),\n  ];\n\nwp_register_script(\n  'example-blocks-integration-handle',\n  $script_url,\n  $script_asset['dependencies'],\n  $script_asset['version'],\n  true\n);\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Please see the ",(0,i.jsx)(t.a,{href:"https://developer.woocommerce.com/docs/cart-and-checkout-handling-scripts-styles-and-data/",children:"Cart and Checkout \u2013 Handling scripts, styles, and data"})," document for more information about how to correctly register scripts using the ",(0,i.jsx)(t.code,{children:"IntegrationInterface"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"creating-a-block",children:"Creating a block"}),"\n",(0,i.jsxs)(t.p,{children:['In the example block, there is a "checkout-newsletter-subscription-block" directory which contains the files needed to register an inner block in the Checkout. The example block template is only set up to import and build a single block, but the Webpack config can be modified to build multiple blocks. Doing this is not supported as part of this document, refer to the ',(0,i.jsx)(t.a,{href:"https://webpack.js.org/concepts/",children:"Webpack documentation"})," instead."]}),"\n",(0,i.jsxs)(t.p,{children:["The principles covered in ",(0,i.jsx)(t.a,{href:"https://developer.wordpress.org/block-editor/getting-started/tutorial/",children:"Tutorial: Build your first block\n"})," apply here too."]}),"\n",(0,i.jsx)(t.h3,{id:"modifying-existing-values-on-the-front-end",children:"Modifying existing values on the front-end"}),"\n",(0,i.jsx)(t.p,{children:"You may not need to create a block to get your extension working the way you want, for example, if your extension only modifies existing content through filters."}),"\n",(0,i.jsx)(t.p,{children:"In this case, you could remove the block folder from the example block, modify the Webpack config file so it no longer reads from that directory, and include the code you need in the entry JavaScript file."}),"\n",(0,i.jsxs)(t.p,{children:["More information about how to use filters can be found in the ",(0,i.jsx)(t.a,{href:"https://github.com/woocommerce/woocommerce/blob/trunk/plugins/woocommerce/client/blocks/packages/checkout/filter-registry/README.md",children:"Filter Registry"})," and ",(0,i.jsx)(t.a,{href:"https://developer.woocommerce.com/docs/category/cart-and-checkout-blocks/available-filters/",children:"Available Filters"})," documents."]}),"\n",(0,i.jsx)(t.h3,{id:"importing-woocommerce-components-into-your-extension",children:"Importing WooCommerce components into your extension"}),"\n",(0,i.jsxs)(t.p,{children:["Components can be imported from ",(0,i.jsx)(t.code,{children:"@woocommerce/blocks-components"})," (externalized to ",(0,i.jsx)(t.code,{children:"window.wc.blocksComponents"})," by ",(0,i.jsx)(t.code,{children:"@woocommerce/dependency-extraction-webpack-plugin"}),"). The list of available components can be seen in ",(0,i.jsx)(t.a,{href:"https://woocommerce.github.io/woocommerce/?path=/docs/woocommerce-blocks_external-components-button--docs",children:"the WooCommerce Storybook"}),', listed under "WooCommerce Blocks -> External components".']}),"\n",(0,i.jsxs)(t.p,{children:["An example of importing the ",(0,i.jsx)(t.code,{children:"Button"})," component is:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'import { Button } from \'@woocommerce/blocks-components\';\n\nconst MyComponent = () => {\n  return <div class="my-wrapper">\n    <Button type="button" />\n  </div>;\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"importing-woocommerce-react-hooks",children:"Importing WooCommerce (React) hooks"}),"\n",(0,i.jsxs)(t.p,{children:["Currently, none of our hooks are designed to be used externally, so trying to import hooks such as ",(0,i.jsx)(t.code,{children:"useStoreCart"})," is not supported. Instead, getting the data from the ",(0,i.jsx)(t.a,{href:"https://github.com/woocommerce/woocommerce/blob/trunk/plugins/woocommerce/client/blocks/docs/third-party-developers/extensibility/data-store/",children:(0,i.jsx)(t.code,{children:"wc/store/..."})})," data stores is preferred."]}),"\n",(0,i.jsx)(t.h2,{id:"back-end-extensibility",children:"Back-end extensibility"}),"\n",(0,i.jsx)(t.h3,{id:"modifying-information-during-the-checkout-process",children:"Modifying information during the Checkout process"}),"\n",(0,i.jsxs)(t.p,{children:["Modifying the server-side part of the Cart and Checkout blocks is possible using PHP. Some actions and filters from the shortcode cart/checkout experience will work too, but not all of them. We have a working document (",(0,i.jsx)(t.a,{href:"https://github.com/woocommerce/woocommerce/blob/trunk/plugins/woocommerce/client/blocks/docs/third-party-developers/extensibility/hooks/hook-alternatives.md",children:"Hook alternatives document"}),") that outlines which hooks are supported as well as alternatives."]}),"\n",(0,i.jsx)(t.h3,{id:"extending-store-api",children:"Extending Store API"}),"\n",(0,i.jsxs)(t.p,{children:["If you need to change how the Store API works, or extend the data in the responses, see ",(0,i.jsx)(t.a,{href:"https://github.com/woocommerce/woocommerce/blob/trunk/plugins/woocommerce/client/blocks/docs/third-party-developers/extensibility/rest-api",children:"Extending the Store API"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>r,x:()=>c});var n=o(6540);const i={},s=n.createContext(i);function r(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);