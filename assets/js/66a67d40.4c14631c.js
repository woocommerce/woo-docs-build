"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[7643],{4212:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"extensions/core-concepts/handling-deactivation-and-uninstallation","title":"Managing extension deactivation and uninstallation","description":"Introduction","source":"@site/../extensions/core-concepts/handling-deactivation-and-uninstallation.md","sourceDirName":"extensions/core-concepts","slug":"/extensions/core-concepts/handling-deactivation-and-uninstallation","permalink":"/docs/extensions/core-concepts/handling-deactivation-and-uninstallation","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../extensions/core-concepts/handling-deactivation-and-uninstallation.md","tags":[],"version":"current","frontMatter":{"post_title":"Managing extension deactivation and uninstallation","sidebar_label":"Deactivation and uninstallation"},"sidebar":"extensionsSidebar","previous":{"title":"Plugin header comments","permalink":"/docs/extensions/core-concepts/example-header-plugin-comment"},"next":{"title":"Maintainability and updates","permalink":"/docs/extensions/core-concepts/maintainability"}}');var a=t(4848),o=t(8453);const s={post_title:"Managing extension deactivation and uninstallation",sidebar_label:"Deactivation and uninstallation"},r="Managing extension deactivation and uninstallation",d={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Removing Scheduled Actions",id:"removing-scheduled-actions",level:2},{value:"Removing Admin Notes",id:"removing-admin-notes",level:2},{value:"Removing Admin Tasks",id:"removing-admin-tasks",level:2},{value:"Unregistering navigation",id:"unregistering-navigation",level:2},{value:"WordPress cleanup tasks",id:"wordpress-cleanup-tasks",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"managing-extension-deactivation-and-uninstallation",children:"Managing extension deactivation and uninstallation"})}),"\n",(0,a.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,a.jsx)(n.p,{children:"There are a number of cleanup tasks you'll need to handle when a merchant deactivates or uninstalls your extension. This guide provides a brief overview of WooCommerce-specific items you'll want to make sure you account for when defining your extension's deactivation and uninstallation logic."}),"\n",(0,a.jsx)(n.h2,{id:"removing-scheduled-actions",children:"Removing Scheduled Actions"}),"\n",(0,a.jsx)(n.p,{children:"If your extension uses Action Scheduler to queue any background jobs, it's important to unschedule those actions when your extension is uninstalled or deactivated."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.code,{children:"as_unschedule_all_actions( $hook, $args, $group );"})}),"\n",(0,a.jsxs)(n.p,{children:["You can read more about using Action Scheduler for managing background processing in the ",(0,a.jsx)(n.a,{href:"https://actionscheduler.org/api/",children:"Action Scheduler API Reference"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"removing-admin-notes",children:"Removing Admin Notes"}),"\n",(0,a.jsx)(n.p,{children:"If you have created any Notes for merchants, you should delete those notes when your extension is deactivated or, at the very least, when it is uninstalled."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"function my_great_extension_deactivate() {\n    ExampleNote::possibly_delete_note();\n}\nregister_deactivation_hook( __FILE__, 'my_great_extension_deactivate' );\n\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The example above assumes that you have followed the pattern this guide recommends for creating Notes as dedicated classes that include the ",(0,a.jsx)(n.code,{children:"NoteTraits"})," trait included with WooCommerce Admin. This approach provides your Note with some baked in functionality that streamlines note operations such as creation and deletion."]}),"\n",(0,a.jsx)(n.h2,{id:"removing-admin-tasks",children:"Removing Admin Tasks"}),"\n",(0,a.jsx)(n.p,{children:"When your extension is deactivated or uninstalled, you should take care to unregister any tasks that your extension created for merchants."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-php",children:"// Unregister task.\nfunction my_extension_deactivate_task() {\n    remove_filter( 'woocommerce_get_registered_extended_tasks', 'my_extension_register_the_task', 10, 1 );\n}\n \nregister_deactivation_hook( __FILE__, 'my_extension_deactivate_task' );\n"})}),"\n",(0,a.jsx)(n.p,{children:"Keep in mind that merchant tasks are managed via a hybrid approach that involves both PHP and JavaScript, so the client-side registration only happens when your extension's JavaScript runs."}),"\n",(0,a.jsx)(n.h2,{id:"unregistering-navigation",children:"Unregistering navigation"}),"\n",(0,a.jsx)(n.p,{children:"When your extension deactivates and uninstalls, any registration you've done with the WooCommerce Navigation will be handled automatically."}),"\n",(0,a.jsx)(n.h2,{id:"wordpress-cleanup-tasks",children:"WordPress cleanup tasks"}),"\n",(0,a.jsxs)(n.p,{children:["There are additional measures you may need to consider when your extension is deactivated or uninstalled, depending on the types of modifications it makes to the underlying WordPress environment when it activates and runs. You can read more about handling deactivation and uninstallation in the ",(0,a.jsx)(n.a,{href:"https://developer.wordpress.org/plugins/intro/",children:"WordPress Plugin Developer Handbook"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var i=t(6540);const a={},o=i.createContext(a);function s(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);