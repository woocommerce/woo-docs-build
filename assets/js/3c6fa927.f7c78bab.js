"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[8050],{5476:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>s,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"block-development/product-collection-block/register-product-collection","title":"Registering custom collections in product collection block","description":"The experimentalRegisterProductCollection function is part of the @woocommerce/blocks-registry package. This function allows third party developers to register a new collection. This function accepts most of the arguments that are accepted by Block Variation.","source":"@site/../block-development/product-collection-block/register-product-collection.md","sourceDirName":"block-development/product-collection-block","slug":"/block-development/product-collection-block/register-product-collection","permalink":"/docs/block-development/product-collection-block/register-product-collection","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../block-development/product-collection-block/register-product-collection.md","tags":[],"version":"current","frontMatter":{"post_title":"Registering custom collections in product collection block","sidebar_label":"Registering custom collections"},"sidebar":"docsSidebar","previous":{"title":"DOM events","permalink":"/docs/block-development/product-collection-block/dom-events"},"next":{"title":"Product Editor","permalink":"/docs/block-development/product-editor-development/"}}');var i=n(4848),t=n(8453);const l={post_title:"Registering custom collections in product collection block",sidebar_label:"Registering custom collections"},r="Registering custom collections in product collection block",s={},d=[{value:"Defining a Collection",id:"defining-a-collection",level:2},{value:"Attributes",id:"attributes",level:3},{value:"Preview Attribute",id:"preview-attribute",level:4},{value:"Examples",id:"examples",level:2},{value:"Example 1: Registering a new collection",id:"example-1-registering-a-new-collection",level:3},{value:"Example 2: Register a new collection with a preview",id:"example-2-register-a-new-collection-with-a-preview",level:3},{value:"Example 3: Advanced usage of preview",id:"example-3-advanced-usage-of-preview",level:3},{value:"Example 4: Collection with inner blocks",id:"example-4-collection-with-inner-blocks",level:3},{value:"Example 5: Collection with <code>usesReference</code> argument",id:"example-5-collection-with-usesreference-argument",level:3},{value:"Example 6: Scope argument",id:"example-6-scope-argument",level:3},{value:"Don&#39;t show collection in Collection Chooser",id:"dont-show-collection-in-collection-chooser",level:4},{value:"Show collection in the block inserter only",id:"show-collection-in-the-block-inserter-only",level:4}];function a(e){const o={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"registering-custom-collections-in-product-collection-block",children:"Registering custom collections in product collection block"})}),"\n",(0,i.jsx)(o.h1,{id:"register-product-collection",children:"Register Product Collection"}),"\n",(0,i.jsxs)(o.p,{children:["The ",(0,i.jsx)(o.code,{children:"__experimentalRegisterProductCollection"})," function is part of the ",(0,i.jsx)(o.code,{children:"@woocommerce/blocks-registry"})," package. This function allows third party developers to register a new collection. This function accepts most of the arguments that are accepted by ",(0,i.jsx)(o.a,{href:"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-variations/#defining-a-block-variation",children:"Block Variation"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.strong,{children:"CAUTION:"})," It's experimental and may change in the future. Please use it with caution."]}),"\n",(0,i.jsx)(o.p,{children:(0,i.jsx)(o.strong,{children:"There are two ways to use this function:"})}),"\n",(0,i.jsxs)(o.ol,{children:["\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsxs)(o.p,{children:["Using ",(0,i.jsx)(o.code,{children:"@woocommerce/dependency-extraction-webpack-plugin"})," in a Webpack configuration: This will allow you to import the function from the package & use it in your code. For example:"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:'import { __experimentalRegisterProductCollection } from "@woocommerce/blocks-registry";\n'})}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsxs)(o.p,{children:["Using the global ",(0,i.jsx)(o.code,{children:"wc"})," object: This will allow you to use the function using the global JS object without importing it. For example:"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:"wc.wcBlocksRegistry.__experimentalRegisterProductCollection({\n...\n});\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.p,{children:["Be sure to add ",(0,i.jsx)(o.code,{children:"wc-blocks-registry"})," as a dependency to your script if you opt to use the ",(0,i.jsx)(o.code,{children:"wc"})," global."]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-php",children:"function enqueue_my_custom_product_collection_script() {\n    wp_enqueue_script(\n        'my-custom-product-collection',\n        plugins_url( '/dist/my-custom-product-collection.js', __FILE__ ),\n        array( 'wc-blocks-registry' ),\n        10\n    );\n}\nadd_action( 'enqueue_block_editor_assets', 'enqueue_my_custom_product_collection_script' );\n"})}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.strong,{children:"Tip:"})," The first method is recommended if you are using Webpack."]}),"\n",(0,i.jsx)(o.h2,{id:"defining-a-collection",children:"Defining a Collection"}),"\n",(0,i.jsxs)(o.p,{children:["We will explain important arguments that can be passed to ",(0,i.jsx)(o.code,{children:"__experimentalRegisterProductCollection"}),". For other arguments, you can refer to the ",(0,i.jsx)(o.a,{href:"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-variations/#defining-a-block-variation",children:"Block Variation"})," documentation."]}),"\n",(0,i.jsx)(o.p,{children:"A Collection is defined by an object that can contain the following fields:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"name"})," (type ",(0,i.jsx)(o.code,{children:"string"}),"): A unique and machine-readable collection name. We recommend using the format ",(0,i.jsx)(o.code,{children:"<plugin-name>/product-collection/<collection-name>"}),". Both ",(0,i.jsx)(o.code,{children:"<plugin-name>"})," and ",(0,i.jsx)(o.code,{children:"<collection-name>"})," should consist only of alphanumeric characters and hyphens (e.g., ",(0,i.jsx)(o.code,{children:"my-plugin/product-collection/my-collection"}),")."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"title"})," (type ",(0,i.jsx)(o.code,{children:"string"}),"): The title of the collection, which will be displayed in various places including the block inserter and collection chooser."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"description"})," (optional, type ",(0,i.jsx)(o.code,{children:"string"}),"): A human-readable description of the collection."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"innerBlocks"})," (optional, type ",(0,i.jsx)(o.code,{children:"Array[]"}),"): An array of inner blocks that will be added to the collection. If not provided, the default inner blocks will be used."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"isDefault"}),": It's set to ",(0,i.jsx)(o.code,{children:"false"})," for all collections. Third party developers don't need to pass this argument."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"isActive"}),": It will be managed by us. Third party developers don't need to pass this argument."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"usesReference"})," (optional, type ",(0,i.jsx)(o.code,{children:"Array[]"}),"): An array of strings specifying the required reference for the collection. Acceptable values are ",(0,i.jsx)(o.code,{children:"product"}),", ",(0,i.jsx)(o.code,{children:"archive"}),", ",(0,i.jsx)(o.code,{children:"cart"}),", and ",(0,i.jsx)(o.code,{children:"order"}),". When the required reference isn't available on Editor side but will be available in Frontend, we will show a preview label."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"scope"})," (optional, type ",(0,i.jsx)(o.code,{children:"Array[]"}),"): The list of scopes where the collection is applicable. Acceptable values are ",(0,i.jsx)(o.code,{children:"block"}),", ",(0,i.jsx)(o.code,{children:"inserter"}),", and ",(0,i.jsx)(o.code,{children:"transform"}),". Defaults to ",(0,i.jsx)(o.code,{children:'["block", "inserter"]'}),".","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.strong,{children:"Note:"})," For Product Collection block, ",(0,i.jsx)(o.code,{children:"block"}),' scope means that the collection will be shown in Collection Chooser and "Choose Collection" toolbar button will be visible. For other scopes, you can refer to the ',(0,i.jsx)(o.a,{href:"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-variations/#defining-a-block-variation",children:"Block Variation"})," documentation."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(o.h3,{id:"attributes",children:"Attributes"}),"\n",(0,i.jsxs)(o.p,{children:["Attributes are the properties that define the behavior of the collection. All the attributes are ",(0,i.jsx)(o.em,{children:"optional"}),". Here are some of the important attributes that can be passed to ",(0,i.jsx)(o.code,{children:"__experimentalRegisterProductCollection"}),":"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.code,{children:"query"})," (type ",(0,i.jsx)(o.code,{children:"object"}),"): The query object that defines the query for the collection. It can contain the following fields:"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"offset"})," (type ",(0,i.jsx)(o.code,{children:"number"}),"): The number of items to offset the query by."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"order"})," (type ",(0,i.jsx)(o.code,{children:"string"}),"): The order of the query. Accepted values are ",(0,i.jsx)(o.code,{children:"asc"})," and ",(0,i.jsx)(o.code,{children:"desc"}),"."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"orderBy"})," (type ",(0,i.jsx)(o.code,{children:"string"}),"): The field to order the query by."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"pages"})," (type ",(0,i.jsx)(o.code,{children:"number"}),"): The number of pages to query."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"perPage"})," (type ",(0,i.jsx)(o.code,{children:"number"}),"): The number of products per page."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"search"})," (type ",(0,i.jsx)(o.code,{children:"string"}),"): The search term to query by."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"taxQuery"})," (type ",(0,i.jsx)(o.code,{children:"object"}),"): The tax query to filter the query by. For example, if you wanna fetch products with category ",(0,i.jsx)(o.code,{children:"Clothing"})," & ",(0,i.jsx)(o.code,{children:"Accessories"})," and tag ",(0,i.jsx)(o.code,{children:"Summer"})," then you can pass ",(0,i.jsx)(o.code,{children:"taxQuery"})," as ",(0,i.jsx)(o.code,{children:'{"product_cat":[20,17],"product_tag":[36]}'}),". Where array values are the term IDs."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"featured"})," (type ",(0,i.jsx)(o.code,{children:"boolean"}),"): Whether to query for featured items."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"timeFrame"})," (type ",(0,i.jsx)(o.code,{children:"object"}),"): The time frame to query by.","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"operator"})," (type ",(0,i.jsx)(o.code,{children:"string"}),"): The operator to use for the time frame query. Accepted values are ",(0,i.jsx)(o.code,{children:"in"})," and ",(0,i.jsx)(o.code,{children:"not-in"}),"."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"value"})," (type ",(0,i.jsx)(o.code,{children:"string"}),"): The value to query by. It should be a valid date string that PHP's ",(0,i.jsx)(o.code,{children:"strtotime"})," function can parse."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"woocommerceOnSale"})," (type ",(0,i.jsx)(o.code,{children:"boolean"}),"): Whether to query for items on sale."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"woocommerceStockStatus"})," (type ",(0,i.jsx)(o.code,{children:"array"}),"): The stock status to query by. Some of the accepted values are ",(0,i.jsx)(o.code,{children:"instock"}),", ",(0,i.jsx)(o.code,{children:"outofstock"}),", ",(0,i.jsx)(o.code,{children:"onbackorder"}),"."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"woocommerceAttributes"})," (type ",(0,i.jsx)(o.code,{children:"array"}),"): The attributes to query by.","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["For example, if you wanna fetch products with color ",(0,i.jsx)(o.code,{children:"blue"})," & ",(0,i.jsx)(o.code,{children:"gray"})," and size ",(0,i.jsx)(o.code,{children:"Large"})," then you can pass ",(0,i.jsx)(o.code,{children:"woocommerceAttributes"})," as ",(0,i.jsx)(o.code,{children:'[{"termId":23,"taxonomy":"pa_color"},{"termId":26,"taxonomy":"pa_size"},{"termId":29,"taxonomy":"pa_color"}]'}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"woocommerceHandPickedProducts"})," (type ",(0,i.jsx)(o.code,{children:"array"}),"): The hand-picked products to query by. It should contain the product IDs."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"priceRange"})," (type ",(0,i.jsx)(o.code,{children:"object"}),"): The price range to query by.","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"min"})," (type ",(0,i.jsx)(o.code,{children:"number"}),"): The minimum price."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"max"})," (type ",(0,i.jsx)(o.code,{children:"number"}),"): The maximum price."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.code,{children:"displayLayout"})," (type ",(0,i.jsx)(o.code,{children:"object"}),"): The display layout object that defines the layout of the collection. It can contain the following fields:"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"type"})," (type ",(0,i.jsx)(o.code,{children:"string"}),"): The type of layout. Accepted values are ",(0,i.jsx)(o.code,{children:"grid"})," and ",(0,i.jsx)(o.code,{children:"stack"}),"."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"columns"})," (type ",(0,i.jsx)(o.code,{children:"number"}),"): The number of columns to display."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"shrinkColumns"})," (type ",(0,i.jsx)(o.code,{children:"boolean"}),"): Whether the layout should be responsive."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.code,{children:"hideControls"})," (type ",(0,i.jsx)(o.code,{children:"array"}),"): The controls to hide. Possible values:"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"order"}),' - "Order by" setting']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"attributes"}),' - "Product Attributes" filter']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"created"}),' - "Created" filter']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"featured"}),' - "Featured" filter']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"hand-picked"}),' - "Hand-picked Products" filter']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"keyword"}),' - "Keyword" filter']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"on-sale"}),' - "On Sale" filter']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"stock-status"}),' - "Stock Status" filter']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"taxonomy"}),' - "Product Categories", "Product Tags" and custom taxonomies filters']}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"price-range"}),' - "Price Range" filter']}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(o.h4,{id:"preview-attribute",children:"Preview Attribute"}),"\n",(0,i.jsxs)(o.p,{children:["The ",(0,i.jsx)(o.code,{children:"preview"})," attribute is optional, and it is used to set the preview state of the collection. It can contain the following fields:"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"initialPreviewState"})," (type ",(0,i.jsx)(o.code,{children:"object"}),"): The initial preview state of the collection. It can contain the following fields:","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"isPreview"})," (type ",(0,i.jsx)(o.code,{children:"boolean"}),"): Whether the collection is in preview mode."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"previewMessage"})," (type ",(0,i.jsx)(o.code,{children:"string"}),"): The message to be displayed in the Tooltip when the user hovers over the preview label."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"setPreviewState"})," (optional, type ",(0,i.jsx)(o.code,{children:"function"}),"): The function to set the preview state of the collection. It receives the following arguments:","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"setState"})," (type ",(0,i.jsx)(o.code,{children:"function"}),"): The function to set the preview state. You can pass a new preview state to this function containing ",(0,i.jsx)(o.code,{children:"isPreview"})," and ",(0,i.jsx)(o.code,{children:"previewMessage"}),"."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"attributes"})," (type ",(0,i.jsx)(o.code,{children:"object"}),"): The current attributes of the collection."]}),"\n",(0,i.jsxs)(o.li,{children:[(0,i.jsx)(o.code,{children:"location"})," (type ",(0,i.jsx)(o.code,{children:"object"}),"): The location of the collection. Accepted values are ",(0,i.jsx)(o.code,{children:"product"}),", ",(0,i.jsx)(o.code,{children:"archive"}),", ",(0,i.jsx)(o.code,{children:"cart"}),", ",(0,i.jsx)(o.code,{children:"order"}),", ",(0,i.jsx)(o.code,{children:"site"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.p,{children:["For more info, you may check ",(0,i.jsx)(o.a,{href:"https://github.com/woocommerce/woocommerce/pull/46369",children:"PR #46369"}),", in which the Preview feature was added"]}),"\n",(0,i.jsx)(o.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(o.h3,{id:"example-1-registering-a-new-collection",children:"Example 1: Registering a new collection"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:'__experimentalRegisterProductCollection({\n  name: "your-plugin-name/product-collection/my-custom-collection",\n  title: "My Custom Collection",\n  icon: "games",\n  description: "This is a custom collection.",\n  keywords: ["custom collection", "product collection"],\n});\n'})}),"\n",(0,i.jsxs)(o.p,{children:["As you can see in the example above, we are registering a new collection with the name ",(0,i.jsx)(o.code,{children:"woocommerce/product-collection/my-custom-collection"})," & title ",(0,i.jsx)(o.code,{children:"My Custom Collection"}),". Here is screenshot of how it will look like:\n",(0,i.jsx)(o.img,{src:"https://github.com/woocommerce/woocommerce/assets/16707866/7fddbc02-a6cd-494e-b2f4-13dd5ef9cf96",alt:"image"})]}),"\n",(0,i.jsx)(o.h3,{id:"example-2-register-a-new-collection-with-a-preview",children:"Example 2: Register a new collection with a preview"}),"\n",(0,i.jsxs)(o.p,{children:["As you can see below, setting the initial preview state is possible. In the example below, we are setting ",(0,i.jsx)(o.code,{children:"isPreview"})," and ",(0,i.jsx)(o.code,{children:"previewMessage"}),"."]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:'__experimentalRegisterProductCollection({\n  name: "your-plugin-name/product-collection/my-custom-collection-with-preview",\n  title: "My Custom Collection with Preview",\n  icon: "games",\n  description: "This is a custom collection with preview.",\n  keywords: ["My Custom Collection with Preview", "product collection"],\n  preview: {\n    initialPreviewState: {\n      isPreview: true,\n      previewMessage:\n        "This is a preview message for my custom collection with preview.",\n    },\n  },\n  attributes: {\n    query: {\n      perPage: 5,\n      featured: true,\n    },\n    displayLayout: {\n      type: "grid",\n      columns: 3,\n      shrinkColumns: true,\n    },\n\thideControls: [ "created", "stock-status" ]\n  },\n});\n'})}),"\n",(0,i.jsxs)(o.p,{children:["Here is how it will look like:\n",(0,i.jsx)(o.img,{src:"https://github.com/woocommerce/woocommerce/assets/16707866/5fc1aa20-552a-4e09-b811-08babab46665",alt:"image"})]}),"\n",(0,i.jsx)(o.h3,{id:"example-3-advanced-usage-of-preview",children:"Example 3: Advanced usage of preview"}),"\n",(0,i.jsxs)(o.p,{children:["As you can see below, it's also possible to use ",(0,i.jsx)(o.code,{children:"setPreviewState"})," to set the preview state. In the example below, we are setting ",(0,i.jsx)(o.code,{children:"initialPreviewState"})," and using ",(0,i.jsx)(o.code,{children:"setPreviewState"})," to change the preview state after 5 seconds."]}),"\n",(0,i.jsx)(o.p,{children:(0,i.jsx)(o.strong,{children:"This example shows:"})}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"How to access current attributes and location in the preview state"}),"\n",(0,i.jsxs)(o.li,{children:["How to use async operations","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["We are using ",(0,i.jsx)(o.code,{children:"setTimeout"})," to change the preview state after 5 seconds. You can use any async operation, like fetching data from an API, to decide the preview state."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(o.li,{children:["How to use the cleanup function as a return value","\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsxs)(o.li,{children:["We are returning a cleanup function that will clear the timeout after the component is unmounted. You can use this to clean up any resources you have used in ",(0,i.jsx)(o.code,{children:"setPreviewState"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:'__experimentalRegisterProductCollection({\n  name: "your-plugin-name/product-collection/my-custom-collection-with-advanced-preview",\n  title: "My Custom Collection with Advanced Preview",\n  icon: "games",\n  description: "This is a custom collection with advanced preview.",\n  keywords: [\n    "My Custom Collection with Advanced Preview",\n    "product collection",\n  ],\n  preview: {\n    setPreviewState: ({\n      setState,\n      attributes: currentAttributes,\n      location,\n    }) => {\n      // setPreviewState has access to the current attributes and location.\n      // console.log( currentAttributes, location );\n\n      const timeoutID = setTimeout(() => {\n        setState({\n          isPreview: false,\n          previewMessage: "",\n        });\n      }, 5000);\n\n      return () => clearTimeout(timeoutID);\n    },\n    initialPreviewState: {\n      isPreview: true,\n      previewMessage:\n        "This is a preview message for my custom collection with advanced preview.",\n    },\n  },\n});\n'})}),"\n",(0,i.jsx)(o.h3,{id:"example-4-collection-with-inner-blocks",children:"Example 4: Collection with inner blocks"}),"\n",(0,i.jsx)(o.p,{children:"As you can see below, it's also possible to define inner blocks for the collection. In the example below, we are defining inner blocks for the collection."}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:'__experimentalRegisterProductCollection({\n  name: "your-plugin-name/product-collection/my-custom-collection-with-inner-blocks",\n  title: "My Custom Collection with Inner Blocks",\n  icon: "games",\n  description: "This is a custom collection with inner blocks.",\n  keywords: ["My Custom Collection with Inner Blocks", "product collection"],\n  innerBlocks: [\n    [\n      "core/heading",\n      {\n        textAlign: "center",\n        level: 2,\n        content: "Title of the collection",\n      },\n    ],\n    [\n      "woocommerce/product-template",\n      {},\n      [\n        ["woocommerce/product-image"],\n        [\n          "woocommerce/product-price",\n          {\n            textAlign: "center",\n            fontSize: "small",\n          },\n        ],\n      ],\n    ],\n  ],\n});\n'})}),"\n",(0,i.jsx)(o.p,{children:"This will create a collection with a heading, product image, and product price. Here is how it will look like:"}),"\n",(0,i.jsx)(o.p,{children:(0,i.jsx)(o.img,{src:"https://github.com/woocommerce/woocommerce/assets/16707866/3d92c084-91e9-4872-a898-080b4b93afca",alt:"image"})}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.strong,{children:"Tip:"})," You can learn more about inner blocks template in the ",(0,i.jsx)(o.a,{href:"https://developer.wordpress.org/block-editor/how-to-guides/block-tutorial/nested-blocks-inner-blocks/#template",children:"Inner Blocks"})," documentation."]}),"\n",(0,i.jsxs)(o.h3,{id:"example-5-collection-with-usesreference-argument",children:["Example 5: Collection with ",(0,i.jsx)(o.code,{children:"usesReference"})," argument"]}),"\n",(0,i.jsxs)(o.p,{children:["When a collection requires a reference to work properly, you can specify it using the ",(0,i.jsx)(o.code,{children:"usesReference"})," argument. In the example below, we are defining a collection that requires a ",(0,i.jsx)(o.code,{children:"product"})," reference."]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:'__experimentalRegisterProductCollection({\n  name: "your-plugin-name/product-collection/my-custom-collection",\n  title: "My Custom Collection",\n  icon: "games",\n  description: "This is a custom collection.",\n  keywords: ["custom collection", "product collection"],\n  usesReference: ["product"],\n});\n'})}),"\n",(0,i.jsxs)(o.p,{children:["This will create a collection that requires a ",(0,i.jsx)(o.code,{children:"product"})," reference. If the required reference isn't available on the Editor side but will be available in the Frontend, we will show a preview label."]}),"\n",(0,i.jsxs)(o.p,{children:["When a collection need one of the multiple references, you can specify it using the ",(0,i.jsx)(o.code,{children:"usesReference"})," argument. In the example below, we are defining a collection that requires either a ",(0,i.jsx)(o.code,{children:"product"})," or ",(0,i.jsx)(o.code,{children:"order"})," reference."]}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:'__experimentalRegisterProductCollection({\n  name: "your-plugin-name/product-collection/my-custom-collection",\n  title: "My Custom Collection",\n  icon: "games",\n  description: "This is a custom collection.",\n  keywords: ["custom collection", "product collection"],\n  usesReference: ["product", "order"],\n});\n'})}),"\n",(0,i.jsx)(o.h3,{id:"example-6-scope-argument",children:"Example 6: Scope argument"}),"\n",(0,i.jsxs)(o.p,{children:["When you don't specify the ",(0,i.jsx)(o.code,{children:"scope"})," argument, its default value is ",(0,i.jsx)(o.code,{children:'["block", "inserter"]'}),". This default behavior is inherited from the ",(0,i.jsx)(o.a,{href:"https://developer.wordpress.org/block-editor/reference-guides/block-api/block-variations/#defining-a-block-variation",children:"Block Variation API"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["The Product Collection block uses the ",(0,i.jsx)(o.code,{children:"block"})," scope to control:"]}),"\n",(0,i.jsxs)(o.ol,{children:["\n",(0,i.jsx)(o.li,{children:"Visibility in the Collection Chooser"}),"\n",(0,i.jsx)(o.li,{children:'Display of the "Choose Collection" toolbar button'}),"\n"]}),"\n",(0,i.jsx)(o.h4,{id:"dont-show-collection-in-collection-chooser",children:"Don't show collection in Collection Chooser"}),"\n",(0,i.jsxs)(o.p,{children:["If you don't want to show your collection in the Collection Chooser, you can set the ",(0,i.jsx)(o.code,{children:"scope"})," argument to an empty array or any other value that doesn't include the ",(0,i.jsx)(o.code,{children:"block"})," value."]}),"\n",(0,i.jsx)(o.p,{children:"For example:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:'__experimentalRegisterProductCollection({\n  name: "your-plugin-name/product-collection/my-custom-collection",\n  title: "My Custom Collection",\n  icon: "games",\n  description: "This is a custom collection.",\n  keywords: ["custom collection", "product collection"],\n  scope: [],\n});\n'})}),"\n",(0,i.jsx)(o.h4,{id:"show-collection-in-the-block-inserter-only",children:"Show collection in the block inserter only"}),"\n",(0,i.jsxs)(o.p,{children:["If you want to show your collection exclusively in the block inserter and not in the Collection Chooser, you can set the ",(0,i.jsx)(o.code,{children:"scope"})," argument to ",(0,i.jsx)(o.code,{children:'["inserter"]'}),". This allows users to add your custom collection directly from the block inserter while keeping it hidden from the Collection Chooser interface."]}),"\n",(0,i.jsx)(o.p,{children:"For example:"}),"\n",(0,i.jsx)(o.pre,{children:(0,i.jsx)(o.code,{className:"language-tsx",children:'__experimentalRegisterProductCollection({\n  name: "your-plugin-name/product-collection/my-custom-collection",\n  title: "My Custom Collection",\n  description: "This is a custom collection.",\n  keywords: ["custom collection", "product collection"],\n  scope: ["inserter"],\n});\n'})}),"\n",(0,i.jsx)(o.hr,{}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.strong,{children:"Tip:"})," You can also take a look at how we are defining our core collections at ",(0,i.jsx)(o.a,{href:"https://github.com/woocommerce/woocommerce/blob/trunk/plugins/woocommerce/client/blocks/assets/js/blocks/product-collection/collections/",children:"plugins/woocommerce/client/blocks/assets/js/blocks/product-collection/collections"})," directory. Our core collections will also evolve over time."]})]})}function h(e={}){const{wrapper:o}={...(0,t.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>l,x:()=>r});var c=n(6540);const i={},t=c.createContext(i);function l(e){const o=c.useContext(t);return c.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function r(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),c.createElement(t.Provider,{value:o},e.children)}}}]);