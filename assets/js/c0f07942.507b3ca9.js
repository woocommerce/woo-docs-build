"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[3442],{1990:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>_,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"code-snippets/useful-functions","title":"Useful core functions","description":"WooCommerce core functions are available on both front-end and admin. They can be found in includes/wc-core-functions.php and can be used by themes in plugins.","source":"@site/../code-snippets/useful-functions.md","sourceDirName":"code-snippets","slug":"/code-snippets/useful-functions","permalink":"/docs/code-snippets/useful-functions","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../code-snippets/useful-functions.md","tags":[],"version":"current","frontMatter":{"post_title":"Useful core functions"},"sidebar":"docsSidebar","previous":{"title":"Uninstalling and removing data","permalink":"/docs/code-snippets/uninstall_remove_all_woocommerce_data"},"next":{"title":"NGINX server to protect upload directory","permalink":"/docs/code-snippets/using_nginx_server_to_protect_your_uploads_directory"}}');var s=c(4848),r=c(8453);const o={post_title:"Useful core functions"},i="Useful core functions",d={},a=[{value:"Conditional Functions",id:"conditional-functions",level:2},{value:"is_woocommerce",id:"is_woocommerce",level:3},{value:"is_shop",id:"is_shop",level:3},{value:"is_product",id:"is_product",level:3},{value:"Coupon Functions",id:"coupon-functions",level:2},{value:"wc_get_coupon_code_by_id",id:"wc_get_coupon_code_by_id",level:3},{value:"wc_get_coupon_id_by_code",id:"wc_get_coupon_id_by_code",level:3},{value:"User Functions",id:"user-functions",level:2},{value:"wc_customer_bought_product",id:"wc_customer_bought_product",level:3},{value:"wc_get_customer_total_spent",id:"wc_get_customer_total_spent",level:3},{value:"wc_get_customer_order_count",id:"wc_get_customer_order_count",level:3},{value:"Formatting Functions",id:"formatting-functions",level:2},{value:"wc_get_dimension",id:"wc_get_dimension",level:3},{value:"wc_get_weight",id:"wc_get_weight",level:3},{value:"wc_clean",id:"wc_clean",level:3},{value:"wc_price",id:"wc_price",level:3},{value:"Order Functions",id:"order-functions",level:2},{value:"wc_get_orders",id:"wc_get_orders",level:3},{value:"wc_get_order",id:"wc_get_order",level:3},{value:"wc_orders_count",id:"wc_orders_count",level:3},{value:"wc_order_search",id:"wc_order_search",level:3},{value:"Page Functions",id:"page-functions",level:2},{value:"wc_get_page_id",id:"wc_get_page_id",level:3},{value:"wc_get_endpoint_url",id:"wc_get_endpoint_url",level:3},{value:"Product Functions",id:"product-functions",level:2},{value:"wc_get_products",id:"wc_get_products",level:3},{value:"wc_get_product",id:"wc_get_product",level:3},{value:"wc_get_product_ids_on_sale",id:"wc_get_product_ids_on_sale",level:3},{value:"wc_get_featured_product_ids",id:"wc_get_featured_product_ids",level:3},{value:"wc_get_related_products",id:"wc_get_related_products",level:3},{value:"Account Functions",id:"account-functions",level:2},{value:"wc_get_account_endpoint_url",id:"wc_get_account_endpoint_url",level:3},{value:"Attribute Functions",id:"attribute-functions",level:2},{value:"wc_get_attribute_taxonomies",id:"wc_get_attribute_taxonomies",level:3},{value:"wc_attribute_taxonomy_name",id:"wc_attribute_taxonomy_name",level:3},{value:"wc_attribute_taxonomy_id_by_name",id:"wc_attribute_taxonomy_id_by_name",level:3},{value:"REST Functions",id:"rest-functions",level:2},{value:"wc_rest_prepare_date_response",id:"wc_rest_prepare_date_response",level:3},{value:"wc_rest_upload_image_from_url",id:"wc_rest_upload_image_from_url",level:3},{value:"wc_rest_urlencode_rfc3986",id:"wc_rest_urlencode_rfc3986",level:3},{value:"wc_rest_check_post_permissions",id:"wc_rest_check_post_permissions",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"useful-core-functions",children:"Useful core functions"})}),"\n",(0,s.jsxs)(n.p,{children:["WooCommerce core functions are available on both front-end and admin. They can be found in ",(0,s.jsx)(n.code,{children:"includes/wc-core-functions.php"})," and can be used by themes in plugins."]}),"\n",(0,s.jsx)(n.h2,{id:"conditional-functions",children:"Conditional Functions"}),"\n",(0,s.jsx)(n.p,{children:"WooCommerce conditional functions help determine the current query/page."}),"\n",(0,s.jsx)(n.h3,{id:"is_woocommerce",children:"is_woocommerce"}),"\n",(0,s.jsx)(n.p,{children:"Returns true if on a page which uses WooCommerce templates (cart and checkout are standard pages with shortcodes and thus are not included)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"is_woocommerce()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"is_shop",children:"is_shop"}),"\n",(0,s.jsx)(n.p,{children:"Returns true when viewing the product type archive (shop)."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"is_shop()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"is_product",children:"is_product"}),"\n",(0,s.jsx)(n.p,{children:"Returns true when viewing a single product."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"is_product()\n"})}),"\n",(0,s.jsx)(n.h2,{id:"coupon-functions",children:"Coupon Functions"}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_coupon_code_by_id",children:"wc_get_coupon_code_by_id"}),"\n",(0,s.jsx)(n.p,{children:"Get coupon code by coupon ID."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_coupon_code_by_id( $id )\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The argument ",(0,s.jsx)(n.code,{children:"$id"})," is the coupon ID."]}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_coupon_id_by_code",children:"wc_get_coupon_id_by_code"}),"\n",(0,s.jsx)(n.p,{children:"Gets the coupon ID by code."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_coupon_id_by_code( $code, $exclude = 0 )\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$code"})," is the coupon code and ",(0,s.jsx)(n.code,{children:"$exclude"})," is to exclude an ID from the check if you're checking existence."]}),"\n",(0,s.jsx)(n.h2,{id:"user-functions",children:"User Functions"}),"\n",(0,s.jsx)(n.h3,{id:"wc_customer_bought_product",children:"wc_customer_bought_product"}),"\n",(0,s.jsx)(n.p,{children:"Checks if a customer has bought an item. The check can be done by email or user ID or both."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_customer_bought_product( $customer_email, $user_id, $product_id )\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_customer_total_spent",children:"wc_get_customer_total_spent"}),"\n",(0,s.jsx)(n.p,{children:"Gets the total spent for a customer."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_customer_total_spent( $user_id )\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$user_id"})," is the user ID of the customer."]}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_customer_order_count",children:"wc_get_customer_order_count"}),"\n",(0,s.jsx)(n.p,{children:"Gets the total orders for a customer."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_customer_order_count( $user_id )\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"$user_id"})," is the user ID of the customer."]}),"\n",(0,s.jsx)(n.h2,{id:"formatting-functions",children:"Formatting Functions"}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_dimension",children:"wc_get_dimension"}),"\n",(0,s.jsxs)(n.p,{children:["Takes a measurement ",(0,s.jsx)(n.code,{children:"$dimension"})," measured in WooCommerce's dimension unit and converts it to the target unit ",(0,s.jsx)(n.code,{children:"$to_unit"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_dimension( $dimension, $to_unit, $from_unit = '' )\n"})}),"\n",(0,s.jsx)(n.p,{children:"Example usages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_dimension( 55, 'in' );\nwc_get_dimension( 55, 'in', 'm' );\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_weight",children:"wc_get_weight"}),"\n",(0,s.jsxs)(n.p,{children:["Takes a weight ",(0,s.jsx)(n.code,{children:"$weight"})," weighed in WooCommerce's weight unit and converts it to the target weight unit ",(0,s.jsx)(n.code,{children:"$to_unit"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_weight( $weight, $to_unit, $from_unit = '' )\n"})}),"\n",(0,s.jsx)(n.p,{children:"Example usages:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_weight( 55, 'kg' );\nwc_get_weight( 55, 'kg', 'lbs' );\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_clean",children:"wc_clean"}),"\n",(0,s.jsxs)(n.p,{children:["Clean variables using ",(0,s.jsx)(n.code,{children:"sanitize_text_field"}),". Arrays are cleaned recursively. Non-scalar values are ignored."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_clean( $var )\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_price",children:"wc_price"}),"\n",(0,s.jsx)(n.p,{children:"Formats a passed price with the correct number of decimals and currency symbol."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_price( $price, $args = array() )\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:" $args"})," array has an option called ",(0,s.jsx)(n.code,{children:" ex_tax_label"})," - if true then an ",(0,s.jsx)(n.code,{children:"excluding tax"})," message will be appended."]}),"\n",(0,s.jsx)(n.h2,{id:"order-functions",children:"Order Functions"}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_orders",children:"wc_get_orders"}),"\n",(0,s.jsx)(n.p,{children:"This function is the standard way of retrieving orders based on certain parameters. This function should be used for order retrieval so that when we move to custom tables, functions still work."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_orders( $args )\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/woocommerce/woocommerce/wiki/wc_get_orders-and-WC_Order_Query",children:"Arguments and usage"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_order",children:"wc_get_order"}),"\n",(0,s.jsxs)(n.p,{children:["This is the main function for returning orders, uses the ",(0,s.jsx)(n.code,{children:"WC_Order_Factory"})," class."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_order( $the_order = false )\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"the_order"})," parameter can be a post object or post ID of the order."]}),"\n",(0,s.jsx)(n.h3,{id:"wc_orders_count",children:"wc_orders_count"}),"\n",(0,s.jsx)(n.p,{children:"Returns the orders count of a specific order status."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_orders_count( $status, string $type = '' )\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_order_search",children:"wc_order_search"}),"\n",(0,s.jsxs)(n.p,{children:["Searches orders based on the given ",(0,s.jsx)(n.code,{children:"$term"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_order_search( $term )\n"})}),"\n",(0,s.jsx)(n.h2,{id:"page-functions",children:"Page Functions"}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_page_id",children:"wc_get_page_id"}),"\n",(0,s.jsx)(n.p,{children:"Gets a WooCommerce page ID by name, e.g. thankyou"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_page_id( $page )\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_endpoint_url",children:"wc_get_endpoint_url"}),"\n",(0,s.jsxs)(n.p,{children:["Gets the URL for an ",(0,s.jsx)(n.code,{children:"$endpoint"}),", which varies depending on permalink settings."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_endpoint_url( $endpoint, $value = '', $permalink = '' )\n"})}),"\n",(0,s.jsx)(n.h2,{id:"product-functions",children:"Product Functions"}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_products",children:"wc_get_products"}),"\n",(0,s.jsx)(n.p,{children:"This function is the standard way of retrieving products based on certain parameters."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_products( $args )\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"https://github.com/woocommerce/woocommerce/wiki/wc_get_products-and-WC_Product_Query",children:"Arguments and usage"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_product",children:"wc_get_product"}),"\n",(0,s.jsxs)(n.p,{children:["This is the main function for returning products. It uses the ",(0,s.jsx)(n.code,{children:"WC_Product_Factory"})," class."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_product( $the_product = false )\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The argument ",(0,s.jsx)(n.code,{children:"$the_product"})," can be a post object or post ID of the product."]}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_product_ids_on_sale",children:"wc_get_product_ids_on_sale"}),"\n",(0,s.jsx)(n.p,{children:"Returns an array containing the IDs of the products that are on sale."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_product_ids_on_sale()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_featured_product_ids",children:"wc_get_featured_product_ids"}),"\n",(0,s.jsx)(n.p,{children:"Returns an array containing the IDs of the featured products."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_featured_product_ids()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_related_products",children:"wc_get_related_products"}),"\n",(0,s.jsx)(n.p,{children:"Gets the related products for product based on product category and tags."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_related_products( $product_id, $limit = 5, $exclude_ids = array() )\n"})}),"\n",(0,s.jsx)(n.h2,{id:"account-functions",children:"Account Functions"}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_account_endpoint_url",children:"wc_get_account_endpoint_url"}),"\n",(0,s.jsx)(n.p,{children:"Gets the account endpoint URL."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_account_endpoint_url( $endpoint )\n"})}),"\n",(0,s.jsx)(n.h2,{id:"attribute-functions",children:"Attribute Functions"}),"\n",(0,s.jsx)(n.h3,{id:"wc_get_attribute_taxonomies",children:"wc_get_attribute_taxonomies"}),"\n",(0,s.jsx)(n.p,{children:"Gets the taxonomies of product attributes."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_get_attribute_taxonomies()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_attribute_taxonomy_name",children:"wc_attribute_taxonomy_name"}),"\n",(0,s.jsx)(n.p,{children:"Gets the taxonomy name for a given product attribute."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_attribute_taxonomy_name( $attribute_name )\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_attribute_taxonomy_id_by_name",children:"wc_attribute_taxonomy_id_by_name"}),"\n",(0,s.jsx)(n.p,{children:"Gets a product attribute ID by name."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_attribute_taxonomy_id_by_name( $name )\n"})}),"\n",(0,s.jsx)(n.h2,{id:"rest-functions",children:"REST Functions"}),"\n",(0,s.jsx)(n.h3,{id:"wc_rest_prepare_date_response",children:"wc_rest_prepare_date_response"}),"\n",(0,s.jsx)(n.p,{children:"Parses and formats a date for ISO8601/RFC3339."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_rest_prepare_date_response( $date, $utc = true )\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Pass ",(0,s.jsx)(n.code,{children:"$utc"})," as ",(0,s.jsx)(n.code,{children:"false"})," to get local/offset time."]}),"\n",(0,s.jsx)(n.h3,{id:"wc_rest_upload_image_from_url",children:"wc_rest_upload_image_from_url"}),"\n",(0,s.jsx)(n.p,{children:"Uploads an image from a given URL."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_rest_upload_image_from_url( $image_url )\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_rest_urlencode_rfc3986",children:"wc_rest_urlencode_rfc3986"}),"\n",(0,s.jsxs)(n.p,{children:["Encodes a ",(0,s.jsx)(n.code,{children:"$value"})," according to RFC 3986."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_rest_urlencode_rfc3986( $value )\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wc_rest_check_post_permissions",children:"wc_rest_check_post_permissions"}),"\n",(0,s.jsx)(n.p,{children:"Checks permissions of posts on REST API."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-php",children:"wc_rest_check_post_permissions( $post_type, $context = 'read', $object_id = 0 )\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The available values for ",(0,s.jsx)(n.code,{children:"$context"})," which is the request context are ",(0,s.jsx)(n.code,{children:"read"}),", ",(0,s.jsx)(n.code,{children:"create"}),", ",(0,s.jsx)(n.code,{children:"edit"}),", ",(0,s.jsx)(n.code,{children:"delete"})," and ",(0,s.jsx)(n.code,{children:"batch"}),"."]})]})}function _(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,c)=>{c.d(n,{R:()=>o,x:()=>i});var t=c(6540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);