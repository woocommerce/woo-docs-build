"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[8908],{2237:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>p,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"code-snippets/free_shipping_customization","title":"Free Shipping Customizations","description":"Free Shipping: Advanced Settings/Customization","source":"@site/../code-snippets/free_shipping_customization.md","sourceDirName":"code-snippets","slug":"/code-snippets/free_shipping_customization","permalink":"/docs/code-snippets/free_shipping_customization","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../code-snippets/free_shipping_customization.md","tags":[],"version":"current","frontMatter":{"post_title":"Free Shipping Customizations","sidebar_label":"Free shipping customizations","current wccom url":"https://woocommerce.com/document/free-shipping/#advanced-settings-customization","combined with":"https://woocommerce.com/document/hide-other-shipping-methods-when-free-shipping-is-available/#use-a-plugin"},"sidebar":"docsSidebar","previous":{"title":"Displaying custom fields in theme","permalink":"/docs/code-snippets/displaying_custom_fields_in_your_theme_or_site"},"next":{"title":"Advanced settings and customization for legacy Local Pickup","permalink":"/docs/code-snippets/legacy_local_pickup_advacned_settings_and_customization"}}');var t=n(4848),s=n(8453);const a={post_title:"Free Shipping Customizations",sidebar_label:"Free shipping customizations","current wccom url":"https://woocommerce.com/document/free-shipping/#advanced-settings-customization","combined with":"https://woocommerce.com/document/hide-other-shipping-methods-when-free-shipping-is-available/#use-a-plugin"},r="Free Shipping Customizations",p={},l=[{value:"Free Shipping: Advanced Settings/Customization",id:"free-shipping-advanced-settingscustomization",level:2},{value:"Overview",id:"overview",level:3},{value:"Adding code",id:"adding-code",level:3},{value:"Code Snippets",id:"code-snippets",level:2},{value:"How do I only show Free Shipping?",id:"how-do-i-only-show-free-shipping",level:3},{value:"How do I only show Local Pickup and Free Shipping?",id:"how-do-i-only-show-local-pickup-and-free-shipping",level:3},{value:"Enabling or Disabling Free Shipping via Hooks",id:"enabling-or-disabling-free-shipping-via-hooks",level:3},{value:"Enable Shipping Methods on a per Class / Product Basis, split orders, or other scenarios?",id:"enable-shipping-methods-on-a-per-class--product-basis-split-orders-or-other-scenarios",level:3}];function c(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"free-shipping-customizations",children:"Free Shipping Customizations"})}),"\n",(0,t.jsx)(i.h2,{id:"free-shipping-advanced-settingscustomization",children:"Free Shipping: Advanced Settings/Customization"}),"\n",(0,t.jsx)(i.h3,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(i.p,{children:"By default, WooCommerce shows all shipping methods that match the customer and the cart contents. This means Free Shipping also shows along with Flat Rate and other Shipping Methods."}),"\n",(0,t.jsx)(i.p,{children:"The functionality to hide all other methods, and only show Free Shipping, requires either custom PHP code or a plugin/extension."}),"\n",(0,t.jsx)(i.h3,{id:"adding-code",children:"Adding code"}),"\n",(0,t.jsx)(i.p,{children:"Before adding snippets, clear your WooCommerce cache. Go to WooCommerce > System Status > Tools > WooCommerce Transients > Clear transients."}),"\n",(0,t.jsx)(i.h2,{id:"code-snippets",children:"Code Snippets"}),"\n",(0,t.jsx)(i.h3,{id:"how-do-i-only-show-free-shipping",children:"How do I only show Free Shipping?"}),"\n",(0,t.jsx)(i.p,{children:"The following snippet will hide all other shipping methods if Free Shipping is available for the customer."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-php",children:"/**\n * Hide other shipping rates when free shipping is available.\n *\n * @param array $rates Array of rates found for the package.\n *\n * @return array\n */\nfunction fsc_hide_shipping_rates_when_free_is_available( $rates ) {\n\t// Go through each rate found.\n\tforeach ( $rates as $rate_id => $rate ) {\n\t\t// If Free Shipping is found, define it as the only rate and break out of the foreach.\n\t\tif ( 'free_shipping' === $rate->method_id ) {\n\t\t\t$rates = [ $rate_id => $rate ];\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn $rates;\n}\nadd_filter( 'woocommerce_package_rates', 'fsc_hide_shipping_rates_when_free_is_available', 10, 1 );\n"})}),"\n",(0,t.jsx)(i.h3,{id:"how-do-i-only-show-local-pickup-and-free-shipping",children:"How do I only show Local Pickup and Free Shipping?"}),"\n",(0,t.jsx)(i.p,{children:"The following snippet will hide all other shipping methods but Free Shipping and Local Pickup if they are available for the customer."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-php",children:"/**\n * If Free Shipping is available hide other rates, excluding Local Pickup.\n *\n * @param array $rates Array of rates found for the package.\n *\n * @return array\n */\nfunction fsc_hide_shipping_rates_when_free_is_available_excluding_local( $rates ) {\n\t// Define arrays to hold our Free Shipping and Local Pickup methods, if found.\n\t$free_shipping = [];\n\t$local_pickup  = [];\n\n\t// Go through each rate received.\n\tforeach ( $rates as $rate_id => $rate ) {\n\t\t// If either method is found, add them to their respective array.\n\t\tif ( 'free_shipping' === $rate->method_id ) {\n\t\t\t$free_shipping[ $rate_id ] = $rate;\n\t\t\tcontinue;\n\t\t}\n\t\tif ( 'pickup_location' === $rate->method_id ) {\n\t\t\t$local_pickup[ $rate_id ] = $rate;\n\t\t}\n\t}\n\n\t// If the free_shipping array contains a method, then merge the local_pickup into it, and overwrite the rates array.\n\tif ( ! empty( $free_shipping ) ) {\n\t\t$rates = array_merge( $free_shipping, $local_pickup );\n\t}\n\n\treturn $rates;\n}\n\nadd_filter( 'woocommerce_package_rates', 'fsc_hide_shipping_rates_when_free_is_available_excluding_local', 10, 1 );\n"})}),"\n",(0,t.jsx)(i.h3,{id:"enabling-or-disabling-free-shipping-via-hooks",children:"Enabling or Disabling Free Shipping via Hooks"}),"\n",(0,t.jsx)(i.p,{children:"If you would like to know if Free Shipping is available programmatically, this is possible. WooCommerce applies a filter like the below:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-php",children:"return apply_filters( 'woocommerce_shipping_' . $this->id . '_is_available', $is_available );\n"})}),"\n",(0,t.jsxs)(i.p,{children:["This means you can use ",(0,t.jsx)(i.code,{children:"add_filter()"})," on ",(0,t.jsx)(i.code,{children:"woocommerce_shipping_free_shipping_is_available"})," and receive ",(0,t.jsx)(i.code,{children:"true"})," or ",(0,t.jsx)(i.code,{children:"false"})," if Free Shipping is enabled. For example, this next snippet would log if Free Shipping is available or not:"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-php",children:"/**\n * Log if Free Shipping is available or not.\n *\n * @param bool $is_available If Free Shipping is available, then `true`, `false` if not.\n *\n * @return bool\n */\nfunction fsc_free_shipping_is_available( $is_available ) {\n\tif ( $is_available ) {\n\t\terror_log( 'Free shipping is available' );\n\t} else {\n\t\terror_log( 'Free shipping is NOT available' );\n\t}\n\treturn $is_available;\n}\nadd_filter( 'woocommerce_shipping_free_shipping_is_available', 'fsc_free_shipping_is_available', 10, 1 );\n"})}),"\n",(0,t.jsx)(i.h3,{id:"enable-shipping-methods-on-a-per-class--product-basis-split-orders-or-other-scenarios",children:"Enable Shipping Methods on a per Class / Product Basis, split orders, or other scenarios?"}),"\n",(0,t.jsxs)(i.p,{children:["Need more flexibility? Take a look at our ",(0,t.jsx)(i.a,{href:"https://woocommerce.com/product-category/woocommerce-extensions/shipping-methods/",children:"premium Shipping Method extensions"}),"."]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>r});var o=n(6540);const t={},s=o.createContext(t);function a(e){const i=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),o.createElement(s.Provider,{value:i},e.children)}}}]);