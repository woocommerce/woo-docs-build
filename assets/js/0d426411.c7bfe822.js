"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[3925],{6440:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"code-snippets/configuring_special_tax_scenarios","title":"Code snippets for configuring special tax scenarios","description":"Scenario A: Charge the same price regardless of location and taxes","source":"@site/../code-snippets/configuring_special_tax_scenarios.md","sourceDirName":"code-snippets","slug":"/code-snippets/configuring_special_tax_scenarios","permalink":"/docs/code-snippets/configuring_special_tax_scenarios","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../code-snippets/configuring_special_tax_scenarios.md","tags":[],"version":"current","frontMatter":{"post_title":"Code snippets for configuring special tax scenarios","sidebar_label":"Configuring special tax scenarios","current wccom url":"https://woocommerce.com/document/setting-up-taxes-in-woocommerce/configuring-specific-tax-setups-in-woocommerce/#configuring-special-tax-setups"},"sidebar":"docsSidebar","previous":{"title":"Payment method support for refunds, subscriptions, pre-orders","permalink":"/docs/code-snippets/check_payment_method_support"},"next":{"title":"Customizing checkout fields using actions and filters","permalink":"/docs/code-snippets/customising-checkout-fields"}}');var o=s(4848),n=s(8453);const i={post_title:"Code snippets for configuring special tax scenarios",sidebar_label:"Configuring special tax scenarios","current wccom url":"https://woocommerce.com/document/setting-up-taxes-in-woocommerce/configuring-specific-tax-setups-in-woocommerce/#configuring-special-tax-setups"},r="Code snippets for configuring special tax scenarios",c={},l=[{value:"Scenario A: Charge the same price regardless of location and taxes",id:"scenario-a-charge-the-same-price-regardless-of-location-and-taxes",level:2},{value:"Scenario B: Charge tax based on the subtotal amount",id:"scenario-b-charge-tax-based-on-the-subtotal-amount",level:2},{value:"Scenario C: Apply different tax rates based on the customer role",id:"scenario-c-apply-different-tax-rates-based-on-the-customer-role",level:2},{value:"Scenario D: Show 0 value taxes",id:"scenario-d-show-0-value-taxes",level:2},{value:"Scenario E: Suffixes on the main variable product",id:"scenario-e-suffixes-on-the-main-variable-product",level:2}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"code-snippets-for-configuring-special-tax-scenarios",children:"Code snippets for configuring special tax scenarios"})}),"\n",(0,o.jsx)(t.h2,{id:"scenario-a-charge-the-same-price-regardless-of-location-and-taxes",children:"Scenario A: Charge the same price regardless of location and taxes"}),"\n",(0,o.jsxs)(t.p,{children:["If a store enters product prices including taxes, but levies various location-based tax rates, the prices will appear to change depending on which tax rate is applied. In reality, the base price remains the same, but the taxes influence the total. ",(0,o.jsx)(t.a,{href:"https://woocommerce.com/document/how-taxes-work-in-woocommerce/#cross-border-taxes",children:"Follow this link for a detailed explanation"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"Some merchants prefer to dynamically change product base prices to account for the changes in taxes and so keep the total price consistent regardless of tax rate. Enable that functionality by adding the following snippet to your child theme's functions.php file or via a code snippet plugin."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-php",children:"<?php\n\nadd_filter( 'woocommerce_adjust_non_base_location_prices', '__return_false' );\n"})}),"\n",(0,o.jsx)(t.h2,{id:"scenario-b-charge-tax-based-on-the-subtotal-amount",children:"Scenario B: Charge tax based on the subtotal amount"}),"\n",(0,o.jsx)(t.p,{children:"The following snippet is useful in case where a store only ads taxes when the subtotal reaches a specified minimum. In the code snippet below that minimum is 110 of the store's currency. Adjust the snippet according to your requirements."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-php",children:"<?php\n\nadd_filter( 'woocommerce_product_get_tax_class', 'big_apple_get_tax_class', 1, 2 );\n\nfunction big_apple_get_tax_class( $tax_class, $product ) {\n\tif ( WC()->cart->subtotal <= 110 )\n\t\t$tax_class = 'Zero Rate';\n\n\treturn $tax_class;\n}\n"})}),"\n",(0,o.jsx)(t.h2,{id:"scenario-c-apply-different-tax-rates-based-on-the-customer-role",children:"Scenario C: Apply different tax rates based on the customer role"}),"\n",(0,o.jsx)(t.p,{children:"Some merchants may require different tax rates to be applied based on a customer role to accommodate for wholesale status or tax exemption."}),"\n",(0,o.jsxs)(t.p,{children:['To enable this functionality, add the following snippet to your child theme\'s functions.php file or via a code snippet plugin. In this snippet, users with "administrator" capabilities will be assigned the ',(0,o.jsx)(t.strong,{children:"Zero rate tax class"}),". Adjust it according to your requirements."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-php",children:"<?php\n/**\n * Apply a different tax rate based on the user role.\n */\nfunction wc_diff_rate_for_user( $tax_class, $product ) {\n\tif ( is_user_logged_in() && current_user_can( 'administrator' ) ) {\n\t\t$tax_class = 'Zero Rate';\n\t}\n\n\treturn $tax_class;\n}\nadd_filter( 'woocommerce_product_get_tax_class', 'wc_diff_rate_for_user', 1, 2 );\nadd_filter( 'woocommerce_product_variation_get_tax_class', 'wc_diff_rate_for_user', 1, 2 );\n"})}),"\n",(0,o.jsx)(t.h2,{id:"scenario-d-show-0-value-taxes",children:"Scenario D: Show 0 value taxes"}),"\n",(0,o.jsx)(t.p,{children:"Taxes that have 0-value are hidden by default. To show them regardless, add the following snippet to your theme's functions.php file or via a code snippet plugins:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-php",children:"add_filter( 'woocommerce_order_hide_zero_taxes', '__return_false' );\n"})}),"\n",(0,o.jsx)(t.h2,{id:"scenario-e-suffixes-on-the-main-variable-product",children:"Scenario E: Suffixes on the main variable product"}),"\n",(0,o.jsx)(t.p,{children:"One of the tax settings for WooCommerce enables the use of suffixes to add additional information to product prices. It's available for use with the variations of a variable product, but is disabled at the main variation level as it can impact website performance when there are many variations."}),"\n",(0,o.jsx)(t.p,{children:"The method responsible for the related price output can be customized via filter hooks if needed for variable products. This will require customization that can be implemented via this filter:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-php",children:"add_filter( 'woocommerce_show_variation_price', '__return_true' );\n"})})]})}function p(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>r});var a=s(6540);const o={},n=a.createContext(o);function i(e){const t=a.useContext(n);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),a.createElement(n.Provider,{value:t},e.children)}}}]);