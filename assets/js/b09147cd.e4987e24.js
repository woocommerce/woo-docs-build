"use strict";(self.webpackChunkwoo_docs_migration=self.webpackChunkwoo_docs_migration||[]).push([[6789],{8313:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>o,toc:()=>r});const o=JSON.parse('{"id":"block-development/cart-and-checkout-blocks/removing-checkout-fields","title":"Removing checkout fields","description":"If you\'re trying to extend the new Checkout block, you might notice the previous checkout_fields isn\'t working. This is intentional as we want to offer more curated extensibility paths. With that said, one of the most common requests we get is how to disable Checkout fields for certain order types. This is not something we encourage, but we are sharing the details due to how commonly requested it is.","source":"@site/../block-development/cart-and-checkout-blocks/removing-checkout-fields.md","sourceDirName":"block-development/cart-and-checkout-blocks","slug":"/block-development/cart-and-checkout-blocks/removing-checkout-fields","permalink":"/docs/block-development/cart-and-checkout-blocks/removing-checkout-fields","draft":false,"unlisted":false,"editUrl":"https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../block-development/cart-and-checkout-blocks/removing-checkout-fields.md","tags":[],"version":"current","frontMatter":{"post_title":"Removing checkout fields","sidebar_label":"Removing checkout fields"},"sidebar":"docsSidebar","previous":{"title":"Data flow overview","permalink":"/docs/block-development/cart-and-checkout-blocks/overview-of-data-flow"},"next":{"title":"Slot and fill","permalink":"/docs/block-development/cart-and-checkout-blocks/slot-fills"}}');var i=n(4848),s=n(8453);const a={post_title:"Removing checkout fields",sidebar_label:"Removing checkout fields"},l="Removing checkout fields",c={},r=[{value:"Why we don&#39;t encourage removing fields",id:"why-we-dont-encourage-removing-fields",level:2},{value:"Disabling fields for a single country",id:"disabling-fields-for-a-single-country",level:2},{value:"Removing every field except Country and names",id:"removing-every-field-except-country-and-names",level:2},{value:"Removing Company and Phone",id:"removing-company-and-phone",level:2},{value:"Removing Company and Phone via code",id:"removing-company-and-phone-via-code",level:2},{value:"Applying changes to all countries you sell to",id:"applying-changes-to-all-countries-you-sell-to",level:2},{value:"Limiting changes to virtual carts only",id:"limiting-changes-to-virtual-carts-only",level:2},{value:"Editing the address card text",id:"editing-the-address-card-text",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"removing-checkout-fields",children:"Removing checkout fields"})}),"\n",(0,i.jsxs)(t.p,{children:["If you're trying to extend the new Checkout block, you might notice the previous ",(0,i.jsx)(t.code,{children:"checkout_fields"})," isn't working. This is intentional as we want to offer more curated extensibility paths. With that said, one of the most common requests we get is how to disable Checkout fields for certain order types. This is not something we encourage, but we are sharing the details due to how commonly requested it is."]}),"\n",(0,i.jsx)(t.h2,{id:"why-we-dont-encourage-removing-fields",children:"Why we don't encourage removing fields"}),"\n",(0,i.jsx)(t.p,{children:"The simple reason is that Checkout is complex, and many plugins need different data, payment methods will need your address info to run fraud detection, or validate your card, tax (including core) will need your full address to calculate taxes correctly, this is something we still think about in Checkout and are looking for a universal solution. While we work on this solution, the document below will help you remove checkout fields."}),"\n",(0,i.jsx)(t.h2,{id:"disabling-fields-for-a-single-country",children:"Disabling fields for a single country"}),"\n",(0,i.jsx)(t.p,{children:"Checkout fields still respect country locale, which means you can modify fields for a country via PHP and this would work fine. The following billing form has 10 fields, 7 of them are required:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://github.com/user-attachments/assets/63d83769-c20c-4c85-aebf-da8510d1d9ae",alt:"Image"})}),"\n",(0,i.jsx)(t.p,{children:"Let's say that in Algeria, we know for sure that postal code and city are redundant, so we can remove them:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",children:"add_filter('woocommerce_get_country_locale', function( $locale ) {\n\n\t$locale['DZ']['postcode']['required'] = false;\n\t$locale['DZ']['postcode']['hidden'] = true;\n\n\t$locale['DZ']['city']['required'] = false;\n\t$locale['DZ']['city']['hidden'] = true;\n\n\t return $locale;\n});\n"})}),"\n",(0,i.jsx)(t.p,{children:"With the code above, both of those fields are removed for Algeria, but not for other countries, which is a good and safe update."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://github.com/user-attachments/assets/96d45e1a-99f0-4b91-92d1-85ee742a9705",alt:"Image"})}),"\n",(0,i.jsx)(t.p,{children:"Keep in mind that this will remove fields for both shipping and billing. We think strongly that billing shape should match shipping shape."}),"\n",(0,i.jsx)(t.h2,{id:"removing-every-field-except-country-and-names",children:"Removing every field except Country and names"}),"\n",(0,i.jsx)(t.p,{children:"We can follow up with removing all other fields except Country, removing the country would fail your order, as we need country to know which fields to remove:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",children:"add_filter('woocommerce_get_country_locale', function( $locale ) {\n\n\t$locale['DZ']['address_1'] = [\n\t\t'required' => false,\n\t\t'hidden'   => true,\n\t];\n\n\t$locale['DZ']['postcode'] = [\n\t\t'required' => false,\n\t\t'hidden'   => true,\n\t];\n\n\t$locale['DZ']['city'] = [\n\t\t'required' => false,\n\t\t'hidden'   => true,\n\t];\n\n\t$locale['DZ']['company'] = [\n\t\t'required' => false,\n\t\t'hidden'   => true,\n\t];\n\t\n\t$locale['DZ']['state'] = [\n\t\t'required' => false,\n\t\t'hidden'   => true,\n\t];\n\t\n\t$locale['DZ']['phone'] = [\n\t\t'required' => false,\n\t\t'hidden'   => true,\n\t];\n\n\treturn $locale;\n});\n"})}),"\n",(0,i.jsx)(t.p,{children:"This is the result:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://github.com/user-attachments/assets/19c82877-3405-4762-82ce-e952746abe66",alt:"Image"})}),"\n",(0,i.jsx)(t.p,{children:"You notice that Address Line 2 is not visible, this is because it will always be skipped if Address Line 1 is skipped."}),"\n",(0,i.jsx)(t.h2,{id:"removing-company-and-phone",children:"Removing Company and Phone"}),"\n",(0,i.jsx)(t.p,{children:"One easy way (if you have access to the website), is to just toggle off the fields from the editor:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://github.com/user-attachments/assets/53740d32-4ccd-4d5e-b08f-91a8b8b7d055",alt:"Image"})}),"\n",(0,i.jsx)(t.p,{children:"This would be the result:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://github.com/user-attachments/assets/3bb8dc23-22cc-4787-8577-648081e57644",alt:"Image"})}),"\n",(0,i.jsx)(t.h2,{id:"removing-company-and-phone-via-code",children:"Removing Company and Phone via code"}),"\n",(0,i.jsx)(t.p,{children:"Unlike other fields, Phone, Company, and Address 2 state is persisted to the database via an option:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"woocommerce_checkout_phone_field"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"woocommerce_checkout_company_field"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"woocommerce_checkout_address_2_field"})}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["The value of those options can be: ",(0,i.jsx)(t.code,{children:"required"}),", ",(0,i.jsx)(t.code,{children:"optional"}),", or ",(0,i.jsx)(t.code,{children:"hidden"}),". They manage the default state of the field. So you can edit that, but still leave agency to the merchant to set it as they see fit. You can also edit them based on locale/country."]}),"\n",(0,i.jsx)(t.p,{children:"To edit the default value:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",children:"add_filter(\n\t'default_option_woocommerce_checkout_phone_field',\n\tfunction ( $default_value ) {\n\t\treturn \"required\";\n\t},\n\t10,\n\t1\n);\n"})}),"\n",(0,i.jsx)(t.p,{children:"If you want to change the value depending on locale (overriding the merchant value for that country), you can use the examples above."}),"\n",(0,i.jsx)(t.p,{children:"Till now, all changes are applied to Algeria only, customers switching would see the correct fields for each country:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://github.com/user-attachments/assets/3b8cb49a-1c95-4fab-8aaa-26b14ce22aad",alt:"Image"})}),"\n",(0,i.jsx)(t.h2,{id:"applying-changes-to-all-countries-you-sell-to",children:"Applying changes to all countries you sell to"}),"\n",(0,i.jsx)(t.p,{children:"As with the above, this is not something we recommend unless you sell to a very controlled set of countries and tested this with each country. Some payment gateways would only enable fraud detection on production mode and not test mode, and your fields that passed test mode fails in production mode, but here it is regardless:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",children:"add_filter('woocommerce_get_country_locale', function( $locale ) {\n\tforeach ( $locale as $key => $value ) {\n\t\t$locale[ $key ]['address_1'] = [\n\t\t\t'required' => false,\n\t\t\t'hidden'   => true,\n\t\t];\n\n\t\t$locale[ $key ]['postcode'] = [\n\t\t\t'required' => false,\n\t\t\t'hidden'   => true,\n\t\t];\n\n\t\t$locale[ $key ]['city'] = [\n\t\t\t'required' => false,\n\t\t\t'hidden'   => true,\n\t\t];\n\n\t\t$locale[ $key ]['state'] = [\n\t\t\t'required' => false,\n\t\t\t'hidden'   => true,\n\t\t];\n\t}\n\n\treturn $locale;\n});\n"})}),"\n",(0,i.jsx)(t.p,{children:"The above code would loop over all counties you sell and disable the fields there."}),"\n",(0,i.jsx)(t.h2,{id:"limiting-changes-to-virtual-carts-only",children:"Limiting changes to virtual carts only"}),"\n",(0,i.jsx)(t.p,{children:"We can choose to remove fields for virtual cart (ones that only require billing and no shipping), this can be done with some extra checks:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",children:"add_filter('woocommerce_get_country_locale', function( $locale ) {\n\t$cart = wc()->cart;\n\n\t// Only remove fields if we're operating on a cart.\n\tif ( ! $cart ) {\n\t\treturn $locale;\n\t}\n\n\t// Only remove fields if we're dealing with a virtual cart.\n\tif ( $cart->needs_shipping() ) {\n\t\treturn $locale;\n\t}\n  // Perform the rest of the logic below...\n"})}),"\n",(0,i.jsx)(t.h2,{id:"editing-the-address-card-text",children:"Editing the address card text"}),"\n",(0,i.jsx)(t.p,{children:"For future visits, Checkout will show an address card for saved addresses, this isn't working constantly right now for billing, but once it works, it will show up like this:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://github.com/user-attachments/assets/ab56c4ca-39ba-47ab-83d1-1ce6dfefc0c3",alt:"Image"})}),"\n",(0,i.jsxs)(t.p,{children:["We can edit that using PHP, because the value is coming from ",(0,i.jsx)(t.code,{children:"get_address_formats"})," function, which passes through the ",(0,i.jsx)(t.code,{children:"woocommerce_localisation_address_formats"})," filter."]}),"\n",(0,i.jsx)(t.p,{children:"We can use the following code:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-php",children:"add_filter( 'woocommerce_localisation_address_formats', function( $formats ) {\n\tforeach ( $formats as $key => $format ) {\n\t\t$formats[ $key ] = \"{first_name} {last_name}\\n{country}\";\n\t\t// You can also use `{name}` instead of first name and last name.\n\t}\n\n\treturn $formats;\n} );\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://github.com/user-attachments/assets/2f87e168-896f-44b3-8c4f-63cc2e159d03",alt:"Image"})}),"\n",(0,i.jsx)(t.p,{children:"A note that you need to pass the string in double quotes for it to work; otherwise the line breaks won't be recognized."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>l});var o=n(6540);const i={},s=o.createContext(i);function a(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);