<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-best-practices/performance/configuring-caching-plugins" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">How to configure caching plugins for WooCommerce | WooCommerce developer docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.woocommerce.com/img/woo-dev-site-logo.svg"><meta data-rh="true" name="twitter:image" content="https://developer.woocommerce.com/img/woo-dev-site-logo.svg"><meta data-rh="true" property="og:url" content="https://developer.woocommerce.com/docs/best-practices/performance/configuring-caching-plugins"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to configure caching plugins for WooCommerce | WooCommerce developer docs"><meta data-rh="true" name="description" content="Excluding pages from the cache"><meta data-rh="true" property="og:description" content="Excluding pages from the cache"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.woocommerce.com/docs/best-practices/performance/configuring-caching-plugins"><link data-rh="true" rel="alternate" href="https://developer.woocommerce.com/docs/best-practices/performance/configuring-caching-plugins" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.woocommerce.com/docs/best-practices/performance/configuring-caching-plugins" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.25570730.css">
<script src="/assets/js/runtime~main.680d9ff5.js" defer="defer"></script>
<script src="/assets/js/main.00b1c171.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/woo-dev-site-logo.svg"><link rel="preload" as="image" href="/img/woo-dev-site-logo-dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs"><div class="navbar__logo"><img src="/img/woo-dev-site-logo.svg" alt="WooCommerce developer docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/woo-dev-site-logo-dark.svg" alt="WooCommerce developer docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/category/getting-started">Extensions</a><a class="navbar__item navbar__link" href="/docs/apis/rest-api/">API</a><a class="navbar__item navbar__link" href="/docs/wc-cli/cli-overview">CLI</a></div><div class="navbar__items navbar__items--right"><a href="https://developer.woocommerce.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/woocommerce/woocommerce/tree/trunk/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/">Getting started</a><button aria-label="Collapse sidebar category &#x27;Getting started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/development-environment">Developer environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/developer-tools">Developer tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/debugging">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/tools-for-low-code-development">Low-code tools</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/features/payments/payment-gateway-api">Features</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/theming/block-theme-development/theming-woo-blocks">Theming</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/category/cart-and-checkout-blocks">Block development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/best-practices/performance/configuring-caching-plugins">Best practices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/best-practices/performance/configuring-caching-plugins">Performance</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/best-practices/performance/configuring-caching-plugins">Configure caching plugins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/performance/performance-best-practices">Performance best practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/performance/performance-optimization">Optimize store performance</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/best-practices/security/prevent-data-leaks">Security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/best-practices/localization-translation/countries-and-subdivisions">Localization and translation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/best-practices/data-management/adding-a-custom-field-to-variable-products">Data management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/best-practices/urls-and-routing/customizing-endpoint-urls">URLs and routing</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/best-practices/review-guidelines/">Review guidelines</a><button aria-label="Expand sidebar category &#x27;Review guidelines&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/coding-standards">Coding standards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/compatibility">Compatibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/core-critical-flows">Core critical flows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/css-sass-naming-conventions">CSS/Sass naming conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/gdpr-compliance">GDPR compliance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/grammar-punctuation-capitalization">Grammar, punctuation and capitalization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/naming-conventions">Naming conventions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/performance-optimization">Optimize store performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/privacy-standards">Privacy standards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/removing-product-product-category-or-shop-from-the-url">Risks of removing URL bases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/support-and-documentation">Support and documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/best-practices/writing-high-quality-testing-instructions">Writing testing instructions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user-experience-guidelines/ux-guidelines-payments/">UX guidelines</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/code-snippets/">Code snippets</a><button aria-label="Expand sidebar category &#x27;Code snippets&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/contribution/contributing/">Contribution</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">Best practices</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Performance</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Configure caching plugins</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>How to configure caching plugins for WooCommerce</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="excluding-pages-from-the-cache">Excluding pages from the cache<a href="#excluding-pages-from-the-cache" class="hash-link" aria-label="Direct link to Excluding pages from the cache" title="Direct link to Excluding pages from the cache">​</a></h2>
<p>Oftentimes if using caching plugins they&#x27;ll already exclude these pages. Otherwise make sure you exclude the following pages from the cache through your caching systems respective settings.</p>
<ul>
<li>Cart</li>
<li>My Account</li>
<li>Checkout</li>
</ul>
<p>These pages need to stay dynamic since they display information specific to the current customer and their cart.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="excluding-woocommerce-session-from-the-cache">Excluding WooCommerce session from the cache<a href="#excluding-woocommerce-session-from-the-cache" class="hash-link" aria-label="Direct link to Excluding WooCommerce session from the cache" title="Direct link to Excluding WooCommerce session from the cache">​</a></h2>
<p>If the caching system you&#x27;re using offers database caching, it might be helpful to exclude <code>_wc_session_</code> from being cached. This will be dependent on the plugin or host caching so refer to the specific instructions or docs for that system.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="excluding-woocommerce-cookies-from-the-cache">Excluding WooCommerce cookies from the cache<a href="#excluding-woocommerce-cookies-from-the-cache" class="hash-link" aria-label="Direct link to Excluding WooCommerce cookies from the cache" title="Direct link to Excluding WooCommerce cookies from the cache">​</a></h2>
<p>Cookies in WooCommerce help track the products in your customers cart, can keep their cart in the database if they leave the site, and powers the recently viewed widget. Below is a list of the cookies WooCommerce uses for this, which you can exclude from caching.</p>
<table><thead><tr><th>COOKIE NAME</th><th>DURATION</th><th>PURPOSE</th></tr></thead><tbody><tr><td>woocommerce_cart_hash</td><td>session</td><td>Helps WooCommerce determine when cart contents/data changes.</td></tr><tr><td>woocommerce_items_in_cart</td><td>session</td><td>Helps WooCommerce determine when cart contents/data changes.</td></tr><tr><td>wp_woocommerce_session_</td><td>2 days</td><td>Contains a unique code for each customer so that it knows where to find the cart data in the database for each customer.</td></tr><tr><td>woocommerce_recently_viewed</td><td>session</td><td>Powers the Recent Viewed Products widget.</td></tr><tr><td>store_notice[notice id]</td><td>session</td><td>Allows customers to dismiss the Store Notice.</td></tr></tbody></table>
<p>We&#x27;re unable to cover all options, but we have added some tips for the popular caching plugins. For more specific support, please reach out to the support team responsible for your caching integration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="w3-total-cache-minify-settings">W3 total cache minify settings<a href="#w3-total-cache-minify-settings" class="hash-link" aria-label="Direct link to W3 total cache minify settings" title="Direct link to W3 total cache minify settings">​</a></h3>
<p>Ensure you add &#x27;mfunc&#x27; to the &#x27;Ignored comment stems&#x27; option in the Minify settings.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wp-rocket">WP-Rocket<a href="#wp-rocket" class="hash-link" aria-label="Direct link to WP-Rocket" title="Direct link to WP-Rocket">​</a></h3>
<p>WooCommerce is fully compatible with WP-Rocket. Please ensure that the following pages (Cart, Checkout, My Account) are not to be cached in the plugin&#x27;s settings.</p>
<p>We recommend avoiding JavaScript file minification.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wp-super-cache">WP Super Cache<a href="#wp-super-cache" class="hash-link" aria-label="Direct link to WP Super Cache" title="Direct link to WP Super Cache">​</a></h3>
<p>WooCommerce is natively compatible with WP Super Cache. WooCommerce sends information to WP Super Cache so that it doesn&#x27;t cache the Cart, Checkout, or My Account pages by default.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="varnish">Varnish<a href="#varnish" class="hash-link" aria-label="Direct link to Varnish" title="Direct link to Varnish">​</a></h3>
<div class="language-varnish codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-varnish codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (req.url ~ &quot;^/(cart|my-account|checkout|addons)&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return (pass);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if ( req.url ~ &quot;\\?add-to-cart=&quot; ) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  return (pass);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-my-varnish-configuration-not-working-in-woocommerce">Why is my Varnish configuration not working in WooCommerce?<a href="#why-is-my-varnish-configuration-not-working-in-woocommerce" class="hash-link" aria-label="Direct link to Why is my Varnish configuration not working in WooCommerce?" title="Direct link to Why is my Varnish configuration not working in WooCommerce?">​</a></h3>
<p>Check out the following WordPress.org Support forum post on<a href="https://wordpress.org/support/topic/varnish-configuration-not-working-in-woocommerce" target="_blank" rel="noopener noreferrer"> how cookies may be affecting your varnish coding</a>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Add this to vcl_recv above &quot;if (req.http.cookie) {&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Unset Cookies except for WordPress admin and WooCommerce pages </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (!(req.url ~ &quot;(wp-login|wp-admin|cart|my-account/*|wc-api*|checkout|addons|logout|lost-password|product/*)&quot;)) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unset req.http.cookie; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Pass through the WooCommerce dynamic pages </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (req.url ~ &quot;^/(cart|my-account/*|checkout|wc-api/*|addons|logout|lost-password|product/*)&quot;) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return (pass); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Pass through the WooCommerce add to cart </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (req.url ~ &quot;\?add-to-cart=&quot; ) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return (pass); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Pass through the WooCommerce API</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (req.url ~ &quot;\?wc-api=&quot; ) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">return (pass); </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Block access to php admin pages via website </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (req.url ~ &quot;^/phpmyadmin/.*$&quot; || req.url ~ &quot;^/phppgadmin/.*$&quot; || req.url ~ &quot;^/server-status.*$&quot;) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">error 403 &quot;For security reasons, this URL is only accessible using localhost (127.0.0.1) as the hostname&quot;; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Add this to vcl_fetch:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Unset Cookies except for WordPress admin and WooCommerce pages </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if ( (!(req.url ~ &quot;(wp-(login|admin)|login|cart|my-account/*|wc-api*|checkout|addons|logout|lost-password|product/*)&quot;)) || (req.request == &quot;GET&quot;) ) { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unset beresp.http.set-cookie; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">} </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-is-my-password-reset-stuck-in-a-loop">Why is my Password Reset stuck in a loop?<a href="#why-is-my-password-reset-stuck-in-a-loop" class="hash-link" aria-label="Direct link to Why is my Password Reset stuck in a loop?" title="Direct link to Why is my Password Reset stuck in a loop?">​</a></h3>
<p>This is due to the My Account page being cached, Some hosts with server-side caching don&#x27;t prevent my-account.php from being cached.</p>
<p>If you&#x27;re unable to reset your password and keep being returned to the login screen, please speak to your host to make sure this page is being excluded from their caching.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../best-practices/performance/configuring-caching-plugins.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/block-development/product-editor-development/product-editor"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Development handbook</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/best-practices/performance/performance-best-practices"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Performance best practices</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#excluding-pages-from-the-cache" class="table-of-contents__link toc-highlight">Excluding pages from the cache</a></li><li><a href="#excluding-woocommerce-session-from-the-cache" class="table-of-contents__link toc-highlight">Excluding WooCommerce session from the cache</a></li><li><a href="#excluding-woocommerce-cookies-from-the-cache" class="table-of-contents__link toc-highlight">Excluding WooCommerce cookies from the cache</a><ul><li><a href="#w3-total-cache-minify-settings" class="table-of-contents__link toc-highlight">W3 total cache minify settings</a></li><li><a href="#wp-rocket" class="table-of-contents__link toc-highlight">WP-Rocket</a></li><li><a href="#wp-super-cache" class="table-of-contents__link toc-highlight">WP Super Cache</a></li><li><a href="#varnish" class="table-of-contents__link toc-highlight">Varnish</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#why-is-my-varnish-configuration-not-working-in-woocommerce" class="table-of-contents__link toc-highlight">Why is my Varnish configuration not working in WooCommerce?</a></li><li><a href="#why-is-my-password-reset-stuck-in-a-loop" class="table-of-contents__link toc-highlight">Why is my Password Reset stuck in a loop?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">COMMUNITY</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/woocommerce/woocommerce/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/community-slack/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wordpress.org/support/plugin/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://developer.woocommerce.com/code-of-conduct/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://developer.woocommerce.com/community-participation-guide/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Participation Guide<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">GROW WITH WOO</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://woocommerce.com/for-agencies/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Become a Woo agency partner<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/partners/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Become a Marketplace partner<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contribution/contributing">Contribute to WooCommerce</a></li></ul></div><div class="col footer__col"><div class="footer__title">MORE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developer.woocommerce.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Woo Developer Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/woocommerce/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WooCommerce Monorepo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.github.io/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Woo Storybook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Merchant Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/woocommerce-marketplace/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WooCommerce Marketplace<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/woocommerce/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Built with Docusaurus. Documentation is licensed under <a href="https://github.com/woocommerce/woocommerce/blob/trunk/plugins/woocommerce/license.txt/">GPLv3</a> and can be modified in the <a href="https://github.com/woocommerce/woocommerce/">WooCommerce Monorepo</a>.
				<div class="docusaurus-footer-for-automattic">
					<a href="https://automattic.com/">
						An
						<img src="/img/automattic.svg" alt="Automattic" class="automattic-logo automattic-logo-light">
						<img src="/img/automattic_dark.svg" alt="Automattic" class="automattic-logo automattic-logo-dark"> 
						Creation</a>
				</div></div></div></div></footer><div class="cookie-banner"><div class="cookie-banner-content"><h3>Use of your personal data</h3><p>We and our partners process your personal data (such as browsing data, IP Addresses, cookie information, and other unique identifiers) based on your consent and/or our legitimate interest to optimize our website, marketing activities, and your user experience.</p><div class="cookie-actions"><button class="cookie-accept-all">Accept All</button><button class="cookie-details-button">Customize Preferences</button></div></div></div></div>
</body>
</html>