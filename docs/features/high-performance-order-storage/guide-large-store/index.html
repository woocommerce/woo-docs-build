<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-features/high-performance-order-storage/guide-large-store" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">A large store&#x27;s guide to enable HPOS on WooCommerce | WooCommerce developer docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developer.woocommerce.com/img/woo-dev-site-logo.svg"><meta data-rh="true" name="twitter:image" content="https://developer.woocommerce.com/img/woo-dev-site-logo.svg"><meta data-rh="true" property="og:url" content="https://developer.woocommerce.com/docs/features/high-performance-order-storage/guide-large-store"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="A large store&#x27;s guide to enable HPOS on WooCommerce | WooCommerce developer docs"><meta data-rh="true" name="description" content="Do you run a high-volume WooCommerce store? Are you about to embark on the task to enable High Performance Order Storage (HPOS) on said store? As we move more and more high-volume store to HPOS, we decided to document the guidelines for those of you who may be faced with this task."><meta data-rh="true" property="og:description" content="Do you run a high-volume WooCommerce store? Are you about to embark on the task to enable High Performance Order Storage (HPOS) on said store? As we move more and more high-volume store to HPOS, we decided to document the guidelines for those of you who may be faced with this task."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developer.woocommerce.com/docs/features/high-performance-order-storage/guide-large-store"><link data-rh="true" rel="alternate" href="https://developer.woocommerce.com/docs/features/high-performance-order-storage/guide-large-store" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer.woocommerce.com/docs/features/high-performance-order-storage/guide-large-store" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.25570730.css">
<script src="/assets/js/runtime~main.680d9ff5.js" defer="defer"></script>
<script src="/assets/js/main.00b1c171.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/woo-dev-site-logo.svg"><link rel="preload" as="image" href="/img/woo-dev-site-logo-dark.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs"><div class="navbar__logo"><img src="/img/woo-dev-site-logo.svg" alt="WooCommerce developer docs" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/woo-dev-site-logo-dark.svg" alt="WooCommerce developer docs" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/docs/category/getting-started">Extensions</a><a class="navbar__item navbar__link" href="/docs/apis/rest-api/">API</a><a class="navbar__item navbar__link" href="/docs/wc-cli/cli-overview">CLI</a></div><div class="navbar__items navbar__items--right"><a href="https://developer.woocommerce.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/woocommerce/woocommerce/tree/trunk/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/">Getting started</a><button aria-label="Collapse sidebar category &#x27;Getting started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/development-environment">Developer environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/developer-tools">Developer tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/debugging">Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/tools-for-low-code-development">Low-code tools</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/features/payments/payment-gateway-api">Features</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/features/payments/payment-gateway-api">Payments</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/features/shipping/shipping-method-api">Shipping</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/features/analytics/adding-columns-to-analytics-reports-and-csv-downloads">Analytics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/features/email/email-html-best-practices">Email</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/features/high-performance-order-storage/">High Performance Order Storage</a><button aria-label="Collapse sidebar category &#x27;High Performance Order Storage&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/features/high-performance-order-storage/cli-tools">HPOS CLI Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/features/high-performance-order-storage/enable-hpos">Enable HPOS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/features/high-performance-order-storage/guide-large-store">Enable HPOS for large stores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/features/high-performance-order-storage/recipe-book">HPOS extension recipe book</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/features/high-performance-order-storage/wc-order-query-improvements">HPOS order querying APIs</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/theming/block-theme-development/theming-woo-blocks">Theming</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/category/cart-and-checkout-blocks">Block development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/best-practices/performance/configuring-caching-plugins">Best practices</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/user-experience-guidelines/ux-guidelines-payments/">UX guidelines</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/code-snippets/">Code snippets</a><button aria-label="Expand sidebar category &#x27;Code snippets&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/contribution/contributing/">Contribution</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">Features</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/features/high-performance-order-storage/"><span itemprop="name">High Performance Order Storage</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Enable HPOS for large stores</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>A large store&#x27;s guide to enable HPOS on WooCommerce</h1></header>
<p>Do you run a high-volume WooCommerce store? Are you about to embark on the task to enable High Performance Order Storage (HPOS) on said store? As we move more and more high-volume store to HPOS, we decided to document the guidelines for those of you who may be faced with this task.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="before-you-begin-get-familiar-with-the-hpos-project-and-related-documentation">Before you begin: <a href="https://developer.woocommerce.com/docs/category/hpos/" target="_blank" rel="noopener noreferrer">Get familiar with the HPOS project and related documentation</a><a href="#before-you-begin-get-familiar-with-the-hpos-project-and-related-documentation" class="hash-link" aria-label="Direct link to before-you-begin-get-familiar-with-the-hpos-project-and-related-documentation" title="Direct link to before-you-begin-get-familiar-with-the-hpos-project-and-related-documentation">​</a></h2>
<ol>
<li><a href="https://woocommerce.com/document/high-performance-order-storage/" target="_blank" rel="noopener noreferrer">High-Performance Order Storage</a></li>
<li><a href="https://github.com/woocommerce/woocommerce/wiki/High-Performance-Order-Storage-Upgrade-Recipe-Book" target="_blank" rel="noopener noreferrer">High-Performance Order Storage Upgrade Recipe Book</a></li>
<li><a href="https://developer.woocommerce.com/2022/09/29/high-performance-order-storage-backward-compatibility-and-synchronization/" target="_blank" rel="noopener noreferrer">High-Performance Order Storage: Backward Compatibility and Synchronization</a></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="phase-1-test-out-hpos-on-a-local-development-system">Phase 1: Test out HPOS on a local development system<a href="#phase-1-test-out-hpos-on-a-local-development-system" class="hash-link" aria-label="Direct link to Phase 1: Test out HPOS on a local development system" title="Direct link to Phase 1: Test out HPOS on a local development system">​</a></h2>
<p>If you have a local development setup for your site, you can try out HPOS on your development setup. Make sure that you have all plugins and any custom code enabled on this test site and that you&#x27;re running their latest versions. The test environment should mimic your production site as much as possible.</p>
<p>At the very least, we suggest you focus on the following tests:</p>
<ol>
<li>Test checkout with every payment method.</li>
<li>Test refunds for those checkouts.</li>
<li>If you are using WooCommerce Subscriptions, check that subscriptions can be purchased and renewals come through.</li>
<li>Any critical flows you&#x27;ve defined for your site.</li>
</ol>
<p>You can repeat the tests with both synchronization enabled and disabled.</p>
<p>Remember that you can <a href="https://woocommerce.com/document/high-performance-order-storage/#section-5" target="_blank" rel="noopener noreferrer">toggle synchronization</a> by going to <strong>WooCommerce &gt; Settings &gt; Advanced &gt; Features</strong>, and toggling the &quot;<strong>Enable compatibility mode</strong>&quot; checkbox.</p>
<p><img decoding="async" loading="lazy" src="https://woocommerce.com/wp-content/uploads/2023/10/image-18.png" alt="Toggle synchronization" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="review-phase-1-checklist">Review: Phase 1 Checklist<a href="#review-phase-1-checklist" class="hash-link" aria-label="Direct link to Review: Phase 1 Checklist" title="Direct link to Review: Phase 1 Checklist">​</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Make sure code on your test site is up to date by installing the latest versions of all WooCommerce-related plugins you&#x27;re running.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test checkout functionality for every payment method.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Verify refund process for test checkouts.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->If WooCommerce Subscriptions is installed, test subscription purchases and renewal.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test critical site flows with synchronization both enabled and disabled.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="phase-2-migrations-and-testing-on-a-staging-site">Phase 2: Migrations and testing on a staging site<a href="#phase-2-migrations-and-testing-on-a-staging-site" class="hash-link" aria-label="Direct link to Phase 2: Migrations and testing on a staging site" title="Direct link to Phase 2: Migrations and testing on a staging site">​</a></h2>
<p>When you&#x27;re happy with how things are working in your local environment, it is time to copy over your production database to the staging site and test out HPOS migrations. For large sites, we recommend setting synchronization to on but, instead of relying on the scheduled jobs to perform the migration, you can speed things up by using the CLI: specifically, the command <strong>wp wc cot sync</strong>.</p>
<p>To get a sense of how much the final migration (on production) is going to take, make sure to time how much it takes for this command to run. For example, for our test store of 9 million orders, this took about a week to complete.</p>
<p>For extra peace of mind, you can run <code>wp wc cot verify_cot_data --verbose</code> to check that the data has migrated successfully.
Once migration is complete on your staging site, and still with synchronization enabled, re-run the tests defined in Phase 1. <strong>Disable the sync, and go through all testing again.</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-out-3rd-party-and-external-systems">Test out 3rd party and external systems<a href="#test-out-3rd-party-and-external-systems" class="hash-link" aria-label="Direct link to Test out 3rd party and external systems" title="Direct link to Test out 3rd party and external systems">​</a></h3>
<p>You may have non-PHP systems directly connected to DB that would escape a normal code audit. Verify that if you have systems such as data warehouses, shipping tracking systems, accounting systems, etc., they are not reading the posts tables directly. If they are, then they would need to be updated before you can proceed with the next steps.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="review-phase-2-checklist">Review: Phase 2 Checklist<a href="#review-phase-2-checklist" class="hash-link" aria-label="Direct link to Review: Phase 2 Checklist" title="Direct link to Review: Phase 2 Checklist">​</a></h3>
<ol class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Make sure the code on your staging site is up to date by installing the latest versions of all WooCommerce-related plugins you&#x27;re running.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Migrate production database to staging site using CLI.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Monitor migration time for insights into production migration duration.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test Phase 1 flows on the staging site with synchronization on.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Optionally, verify data migration integrity using <em>wp wc cot verify_cot_data --verbose.</em></li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test Phase 1 flows on the staging site with synchronization off.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Audit third-party systems to ensure they do not directly access posts tables.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="phase-3-enabling-hpos-on-production">Phase 3: Enabling HPOS on production<a href="#phase-3-enabling-hpos-on-production" class="hash-link" aria-label="Direct link to Phase 3: Enabling HPOS on production" title="Direct link to Phase 3: Enabling HPOS on production">​</a></h2>
<p>If you are happy with testing on your local setup and staging site, it&#x27;s time to start working on enabling HPOS in production.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enable-synchronization-keeping-posts-authoritative">Enable synchronization, keeping posts authoritative<a href="#enable-synchronization-keeping-posts-authoritative" class="hash-link" aria-label="Direct link to Enable synchronization, keeping posts authoritative" title="Direct link to Enable synchronization, keeping posts authoritative">​</a></h3>
<p>Just like in the previous phases, you&#x27;ll want to enable synchronization while still using the WordPress posts storage as order storage. As usual, do this by going to <strong>WooCommerce &gt; Settings &gt; Advanced &gt; Features</strong> and making sure that <strong>Use the WordPress posts tables</strong> is selected as the order data storage.</p>
<p>This will make sure that orders will start appearing in the HPOS tables, and that existing orders will stay up to date.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migrate-and-verify-data">Migrate and verify data<a href="#migrate-and-verify-data" class="hash-link" aria-label="Direct link to Migrate and verify data" title="Direct link to Migrate and verify data">​</a></h3>
<p>Now, start the migration by enabling synchronization by toggling on the &quot;<strong>Enable compatibility mode</strong>&quot; checkbox.</p>
<p>Right after enabling synchronization, you can start migrating past orders from the post tables to the new HPOS tables via CLI using the <code>wp wc cot sync</code> command.</p>
<p>In case you see any errors, turning off the sync, or interrupting the sync CLI job is considered safe. You can resume once you have resolved the error (or if the error was unrelated to the sync process).</p>
<p>Optionally, you can also run the verify command (<code>wp wc cot verify_cot_data --verbose</code>) to check that data migrated is as expected.</p>
<p>Important: Even if the CLI job has completed, don&#x27;t turn off synchronization just yet. For a production site, we recommend disabling sync progressively: disabling sync on read and then fully disabling sync.</p>
<p>Also, we didn&#x27;t see a noticeable negative performance impact when keeping synchronization enabled (with posts authoritative) during our recent high-volume store migration.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="switch-to-hpos-as-authoritative">Switch to HPOS as authoritative<a href="#switch-to-hpos-as-authoritative" class="hash-link" aria-label="Direct link to Switch to HPOS as authoritative" title="Direct link to Switch to HPOS as authoritative">​</a></h3>
<p>It&#x27;s time to switch to HPOS. Go to <strong>WooCommerce &gt; Settings &gt; Advanced &gt; Features</strong> and set HPOS to be authoritative (select &quot;<strong>Use the WooCommerce orders tables</strong>&quot;).</p>
<p>As mentioned above, don&#x27;t turn off synchronization yet. If there are any issues, the system can be instantaneously reverted to the posts table, resulting in no downtime.</p>
<p>Revisit all your critical flows from the previous phases and run some tests. Make sure to test checkout with various payment methods and your critical flows. On a high-volume store you should probably see some orders coming in naturally too, so open a few of those orders and verify that all the order data is being populated as expected. Keep an eye on your support or contact channels as well.</p>
<p><strong>Tip</strong>: If your store has a natural low volume period then we&#x27;d recommend making the switch then, but you should plan to be online for some time after. Both switching to HPOS or reverting to posts (if needed) are hot migrations, and do not require any planned downtime.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="switch-off-sync-on-the-read">Switch off sync on the read<a href="#switch-off-sync-on-the-read" class="hash-link" aria-label="Direct link to Switch off sync on the read" title="Direct link to Switch off sync on the read">​</a></h3>
<p>In the previous steps you have enabled HPOS with sync on, now it&#x27;s time to disable synchronization progressively in order to start seeing most of the benefits from HPOS. The first step in this process would be to disable sync on read, which you can do via the following snippet:</p>
<div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">add_filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;woocommerce_hpos_enable_sync_on_read&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string single-quoted-string" style="color:#e3116c">&#x27;__return_false&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We disable sync on read first because it demands more resources. If your site is running as expected, and you see some orders coming in, you can disable sync on read. We disabled this on our high-volume store migration after just 6 hours of setting HPOS to authoritative.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="switch-off-sync-on-write">Switch off sync on write<a href="#switch-off-sync-on-write" class="hash-link" aria-label="Direct link to Switch off sync on write" title="Direct link to Switch off sync on write">​</a></h3>
<p>If everything is working as expected, you can disable sync on write as well. Given sync on read was already disabled, you can disable sync altogether from the settings. As usual, go to <strong>WooCommerce &gt; Settings &gt; Advanced &gt; Features</strong>, and uncheck <strong>&quot;Enable compatibility mode&quot;</strong>.</p>
<p>On our high-volume site, we fully disabled sync after 1 week. We still run some manual synchronization (via <code>wp wc cot sync</code>) periodically so that we have the opportunity to fall back to posts immediately should anything happen.</p>
<p>Keep in mind that disabling synchronization does not remove the ability to revert to the posts datastore, but you&#x27;d have to wait for the migration jobs to backfill the posts table with any data in the HPOS tables that they are missing. As always, <code>wp wc cot sync</code> can also be used for this purpose.</p>
<p>Now with synchronization fully disabled, test out various critical flows, check that orders are coming in naturally as expected, and keep an eye on your support and contact channels.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="review-phase-3-checklist">Review: Phase 3 Checklist<a href="#review-phase-3-checklist" class="hash-link" aria-label="Direct link to Review: Phase 3 Checklist" title="Direct link to Review: Phase 3 Checklist">​</a></h3>
<ol class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Plan to be online and monitoring your live site for a period of time.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Enable synchronization with posts set as authoritative: in <strong>WooCommerce &gt; Settings &gt; Advanced &gt; Features</strong> &gt; select &quot;<strong>Use the WordPress posts tables</strong>&quot;.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Start migration via CLI using the <code>wp wc cot sync</code> command.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Monitor for errors during migration; halt or resume as necessary.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Verify migrated data integrity using the verify command <code>wp wc cot verify_cot_data</code>.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Enable synchronization with HPOS set as authoritative: in <strong>WooCommerce &gt; Settings &gt; Advanced &gt; Features</strong> &gt; select &quot;Use the <strong>WooCommerce orders tables</strong>&quot;.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test all critical flows, perform checkouts with multiple payment methods, and verify order data accuracy.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Monitor support tickets for any issues.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Disable synchronization on read using the provided snippet: <code>add_filter( &#x27;woocommerce_hpos_enable_sync_on_read&#x27;, &#x27;__return_false&#x27; );</code></li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Monitor site performance.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->After one week of stable operation, fully disable sync.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Continuously monitor site performance, order processing, and support tickets.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-guidelines">General guidelines<a href="#general-guidelines" class="hash-link" aria-label="Direct link to General guidelines" title="Direct link to General guidelines">​</a></h3>
<ol class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Keep test environments as close to the production setup as possible.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Document any issues encountered during testing and migration.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Regularly communicate with stakeholders regarding testing progress and outcomes.</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Plan for potential fallback scenarios, ensuring the ability to revert to posts if issues arise.</li>
</ol>
<p>Did you follow this guide? Drop us a comment below to let us know how it went. Still have more questions? Reach to us on our dedicated HPOS upgrade channel in the Community Slack: <a href="https://woocommercecommunity.slack.com/archives/C043X91E72M" target="_blank" rel="noopener noreferrer">#hpos-upgrade-party</a>. If you are not yet a member of the Woo Slack Community, you can join <a href="https://woocommerce.com/community-slack/" target="_blank" rel="noopener noreferrer">here</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/woocommerce/woocommerce/tree/docusaurus-docs-prep/docs/docs/../features/high-performance-order-storage/guide-large-store.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/features/high-performance-order-storage/enable-hpos"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Enable HPOS</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/features/high-performance-order-storage/recipe-book"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">HPOS extension recipe book</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-begin-get-familiar-with-the-hpos-project-and-related-documentation" class="table-of-contents__link toc-highlight">Before you begin: Get familiar with the HPOS project and related documentation</a></li><li><a href="#phase-1-test-out-hpos-on-a-local-development-system" class="table-of-contents__link toc-highlight">Phase 1: Test out HPOS on a local development system</a><ul><li><a href="#review-phase-1-checklist" class="table-of-contents__link toc-highlight">Review: Phase 1 Checklist</a></li></ul></li><li><a href="#phase-2-migrations-and-testing-on-a-staging-site" class="table-of-contents__link toc-highlight">Phase 2: Migrations and testing on a staging site</a><ul><li><a href="#test-out-3rd-party-and-external-systems" class="table-of-contents__link toc-highlight">Test out 3rd party and external systems</a></li><li><a href="#review-phase-2-checklist" class="table-of-contents__link toc-highlight">Review: Phase 2 Checklist</a></li></ul></li><li><a href="#phase-3-enabling-hpos-on-production" class="table-of-contents__link toc-highlight">Phase 3: Enabling HPOS on production</a><ul><li><a href="#enable-synchronization-keeping-posts-authoritative" class="table-of-contents__link toc-highlight">Enable synchronization, keeping posts authoritative</a></li><li><a href="#migrate-and-verify-data" class="table-of-contents__link toc-highlight">Migrate and verify data</a></li><li><a href="#switch-to-hpos-as-authoritative" class="table-of-contents__link toc-highlight">Switch to HPOS as authoritative</a></li><li><a href="#switch-off-sync-on-the-read" class="table-of-contents__link toc-highlight">Switch off sync on the read</a></li><li><a href="#switch-off-sync-on-write" class="table-of-contents__link toc-highlight">Switch off sync on write</a></li><li><a href="#review-phase-3-checklist" class="table-of-contents__link toc-highlight">Review: Phase 3 Checklist</a></li><li><a href="#general-guidelines" class="table-of-contents__link toc-highlight">General guidelines</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">COMMUNITY</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/woocommerce/woocommerce/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/community-slack/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://wordpress.org/support/plugin/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://developer.woocommerce.com/code-of-conduct/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Code of Conduct<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://developer.woocommerce.com/community-participation-guide/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Community Participation Guide<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">GROW WITH WOO</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://woocommerce.com/for-agencies/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Become a Woo agency partner<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/partners/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Become a Marketplace partner<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contribution/contributing">Contribute to WooCommerce</a></li></ul></div><div class="col footer__col"><div class="footer__title">MORE</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developer.woocommerce.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Woo Developer Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/woocommerce/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WooCommerce Monorepo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.github.io/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Woo Storybook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Merchant Documentation<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://woocommerce.com/woocommerce-marketplace/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WooCommerce Marketplace<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/woocommerce/woocommerce/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Built with Docusaurus. Documentation is licensed under <a href="https://github.com/woocommerce/woocommerce/blob/trunk/plugins/woocommerce/license.txt/">GPLv3</a> and can be modified in the <a href="https://github.com/woocommerce/woocommerce/">WooCommerce Monorepo</a>.
				<div class="docusaurus-footer-for-automattic">
					<a href="https://automattic.com/">
						An
						<img src="/img/automattic.svg" alt="Automattic" class="automattic-logo automattic-logo-light">
						<img src="/img/automattic_dark.svg" alt="Automattic" class="automattic-logo automattic-logo-dark"> 
						Creation</a>
				</div></div></div></div></footer><div class="cookie-banner"><div class="cookie-banner-content"><h3>Use of your personal data</h3><p>We and our partners process your personal data (such as browsing data, IP Addresses, cookie information, and other unique identifiers) based on your consent and/or our legitimate interest to optimize our website, marketing activities, and your user experience.</p><div class="cookie-actions"><button class="cookie-accept-all">Accept All</button><button class="cookie-details-button">Customize Preferences</button></div></div></div></div>
</body>
</html>